(function(t){function e(e){for(var s,r,n=e[0],l=e[1],c=e[2],u=0,p=[];u<n.length;u++)r=n[u],i[r]&&p.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},o=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02ce":function(t,e,a){},"034f":function(t,e,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},"1cb1":function(t,e,a){"use strict";var s=a("c4b5"),i=a.n(s);i.a},"1e47":function(t,e,a){},"286a":function(t,e,a){},"2ece":function(t,e,a){},"2fe3":function(t,e,a){"use strict";var s=a("02ce"),i=a.n(s);i.a},4727:function(t,e,a){},"4a2f":function(t,e,a){"use strict";var s=a("b1d9"),i=a.n(s);i.a},"4e11":function(t,e,a){"use strict";var s=a("4727"),i=a.n(s);i.a},"4ffd":function(t,e,a){t.exports=a.p+"img/logo.02f5a937.png"},"55c3":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),i=a("bc3a"),o=a.n(i),r=a("a7fe"),n=a.n(r),l=(a("4989"),a("ecee")),c=a("c074"),d=a("ad3d"),u=a("9062"),p=a.n(u),m=(a("e40d"),a("7bb1")),v=a("a925"),f=a("0a63"),h=a.n(f),g=function(t){var e=new Date(1e3*t);return e.toLocaleDateString()},b=(a("a481"),a("c5f6"),function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,function(t,e,a){var s=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return s}))}),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticStyle:{"background-color":"rgb(238, 238, 238)"}},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("router-view")],1)},x=[],C={data:function(){return{}},computed:{isLoading:function(){return this.$store.state.isLoading}}},y=C,$=(a("034f"),a("2877")),k=Object($["a"])(y,_,x,!1,null,null,null),P=k.exports,w=a("8c4f"),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{staticClass:"d-flex justify-center align-center",staticStyle:{height:"100vh"}},[a("v-card",{attrs:{width:"500"}},[a("v-toolbar",{attrs:{color:"teal darken-1",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Login form")])],1),a("v-card-text",[a("v-form",{staticStyle:{width:"100%"},on:{submit:t.signIn}},[a("v-layout",{staticClass:"flex-column justify-center"},[a("v-flex",{attrs:{lg12:""}},[a("v-text-field",{attrs:{label:"Email address",outlined:"",autofocus:""},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),a("v-flex",{attrs:{lg12:""}},[a("v-text-field",{attrs:{label:"Password","append-icon":t.password_show?"mdi-eye":"mdi-eye-off",type:t.password_show?"text":"password",outlined:"",autofocus:""},on:{"click:append":function(e){t.password_show=!t.password_show}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),a("v-flex",{staticClass:"justify-end",attrs:{lg12:""}},[a("input",{attrs:{type:"checkbox",value:"remember-me"}}),t._v(" Remember me\n            ")]),a("v-flex",{staticClass:"justify-center",attrs:{lg12:""}},[a("v-btn",{attrs:{color:"teal darken-1",dark:"",type:"submit"}},[t._v("Sign in")])],1),a("v-flex",{staticClass:"justify-center mt-5",attrs:{lg12:""}},[a("p",[t._v("© 2017-2018")])])],1)],1)],1)],1)],1)],1)},L=[],O={data:function(){return{user:{username:"",password:""},password_show:!1}},methods:{signIn:function(){var t=this,e="https://vue-course-api.hexschool.io/admin/signin";this.$http.post(e,t.user).then(function(e){console.log(e.data),e.data.success&&t.$router.push("/admin/products")})}}},S=O,E=Object($["a"])(S,j,L,!1,null,null,null),q=E.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Alert"),a("Navbar"),a("div",{staticClass:"content"},[a("Sidebar"),a("router-view")],1)],1)},M=[],I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-toolbar",{staticClass:"indigo darken-2",staticStyle:{position:"fixed",left:"0",right:"0","z-index":"5"},attrs:{dense:"",dark:""}},[a("v-toolbar-title",[t._v("JM TRAVEL")]),a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("登出")])],1)},A=[],U={methods:{signOut:function(){var t=this,e="https://vue-course-api.hexschool.io/logout";this.$http.post(e,t.user).then(function(e){e.data.success&&t.$router.push("/homepage")})}}},D=U,F=(a("e29b"),Object($["a"])(D,I,A,!1,null,"42710cdb",null)),T=F.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{staticClass:"side-bar",staticStyle:{position:"fixed",left:"0",top:"48.3px",bottom:"0"},attrs:{dark:"",permanent:""}},[a("v-img",{staticStyle:{"background-position":"center center"},attrs:{src:"https://demos.creative-tim.com/material-dashboard-pro/assets/img/sidebar-3.jpg",height:"100%"}},[a("v-layout",{staticClass:"fill-height pa-0",staticStyle:{height:"100vh","background-color":"rgba(0, 0, 0, 0.7)","border-radius":"unset"},attrs:{column:"",tag:"v-list"}},[a("v-list",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"pl-4"},[t._v("Admin")])],1)],1),a("v-divider",{staticClass:"ma-0"}),a("v-list",t._l(t.items,function(e){return a("v-list-group",{key:e.title,attrs:{"prepend-icon":e.action,"no-action":"","active-class":"success--text"},model:{value:e.active,callback:function(a){t.$set(e,"active",a)},expression:"item.active"}},[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item",{staticClass:"pa-0"},[t._v(t._s(e.title))])],1)],1),t._l(e.items,function(e){return a("v-list-item",{key:e.title,staticStyle:{background:"rgba(81, 81, 81, 0.4)","text-decoration":"none"},attrs:{ripple:"",to:e.link,color:"success"}},[a("v-list-item-content",[a("v-list-item",{domProps:{textContent:t._s(e.title)}},[t._v(">")])],1)],1)})],2)}),1)],1)],1)],1)],1)},R=[],W={data:function(){return{items:[{action:"fas fa-box-open",title:"產品管理",active:!1,items:[{title:"產品列表",link:"/admin/products"}]},{action:"fas fa-address-card",title:"訂單管理",active:!1,items:[{title:"訂單列表",link:"/admin/orders"}]},{action:"fas fa-ticket-alt",title:"活動管理",active:!1,items:[{title:"優惠券",link:"/admin/coupons"}]}]}}},J=W,V=Object($["a"])(J,z,R,!1,null,null,null),Y=V.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v("\n    "+t._s(e.message)+"\n    "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}),0)},B=[],G=(a("ac6a"),{name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout(function(){e.messages.forEach(function(a,s){a.timestamp===t&&e.messages.splice(s,1)})},5e3)}},created:function(){var t=this;t.$bus.$on("alertMessage",function(e,a){t.updateMessage(e,a)})}}),K=G,Q=(a("4a2f"),Object($["a"])(K,H,B,!1,null,null,null)),X=Q.exports,Z={components:{Navbar:T,Sidebar:Y,Alert:X}},tt=Z,et=(a("2fe3"),Object($["a"])(tt,N,M,!1,null,null,null)),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products-area"},[a("v-container",{staticStyle:{padding:"unset"},attrs:{fluid:""}},[a("v-layout",{staticClass:"mb-3",attrs:{"justify-end":""}},[a("v-flex",{staticClass:"d-flex justify-end",attrs:{lg2:"",sm2:"",xs12:"","ma-1":""}},[a("CreateProduct",{on:{getProducts:t.getProducts}})],1)],1),a("v-data-table",{staticClass:"elevation-1 table",staticStyle:{"background-color":"rgb(255, 255, 255)"},attrs:{headers:t.headers,items:t.items,"items-per-page":10,"item-key":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.is_enabled",fn:function(e){var s=e.item;return[s.is_enabled?a("p",[t._v("是")]):a("p",[t._v("否")])]}},{key:"item.action",fn:function(e){var s=e.item;return[a("ModifyProduct",{staticClass:"d-inline-block",attrs:{item:t.tempProducts},on:{editProduct:function(e){return t.editProduct(s)},getProducts:function(e){return t.getProducts()}}}),a("v-btn",{attrs:{small:"",dark:"",color:"pink darken-1"},on:{click:function(e){return t.removeProduct(s)}}},[t._v("刪除")])]}}])}),a("Pagination",{attrs:{pages:t.pagination},on:{callPage:t.getProducts}}),a("div",{staticClass:"text-right"},[a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("新增產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4",staticStyle:{"text-align":"-webkit-left"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.imageUrl,expression:"tempProducts.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProducts.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"imageUrl",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[t._v("\n                      或 上傳圖片\n                      "),t.uploadFileLoading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),a("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),a("img",{staticClass:"img-fluid",attrs:{src:t.tempProducts.imageUrl,alt:""}})]),a("div",{staticClass:"col-sm-8",staticStyle:{"text-align":"-webkit-left"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.title,expression:"tempProducts.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProducts.title},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.tempProducts.category,expression:"tempProducts.category",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProducts.category},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"category",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.unit,expression:"tempProducts.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProducts.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.origin_price,expression:"tempProducts.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProducts.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"origin_price",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.price,expression:"tempProducts.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProducts.price},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"price",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.description,expression:"tempProducts.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProducts.description},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.content,expression:"tempProducts.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProducts.content},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.is_enabled,expression:"tempProducts.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProducts.is_enabled)?t._i(t.tempProducts.is_enabled,null)>-1:t._q(t.tempProducts.is_enabled,1)},on:{change:function(e){var a=t.tempProducts.is_enabled,s=e.target,i=s.checked?1:0;if(Array.isArray(a)){var o=null,r=t._i(a,o);s.checked?r<0&&t.$set(t.tempProducts,"is_enabled",a.concat([o])):r>-1&&t.$set(t.tempProducts,"is_enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.tempProducts,"is_enabled",i)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])])])],1)],1)},it=[],ot=a("1157"),rt=a.n(ot),nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"amber darken-2"},on:{click:function(e){return t.openDialog()}}},[t._v("建立新產品")]),a("v-dialog",{staticStyle:{"z-index":"998"},attrs:{width:"70%"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{staticStyle:{margin:"0 auto"}},[a("div",{staticClass:"d-flex justify-start align-center"},[a("v-icon",{staticClass:"indigo success elevation-4 pa-5 mr-5 ml-5",attrs:{large:"",dark:""}},[t._v("fas fa-file-alt")]),a("div",{staticStyle:{"font-size":"25px"}},[t._v("新增產品")])],1),a("v-form",{ref:"form",staticClass:"pa-4"},[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mb-6",attrs:{dense:"",outlined:"",color:"purple","item-color":"purple",height:"20px",label:"輸入圖片網址","hide-details":""},model:{value:t.query_option.imgUrl,callback:function(e){t.$set(t.query_option,"imgUrl",e)},expression:"query_option.imgUrl"}}),a("v-file-input",{ref:"file",attrs:{"prepend-inner-icon":"mdi-camera","prepend-icon":"",outlined:"",dense:"",label:"或上傳圖片",color:"purple","hide-details":""},on:{change:t.uploadFile}}),a("img",{staticClass:"img-fluid",attrs:{src:t.query_option.imgUrl,alt:""}})],1),a("v-col",[a("v-row",[a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"請輸入標題",outlined:"",dense:"",color:"purple","hide-details":""},model:{value:t.query_option.title,callback:function(e){t.$set(t.query_option,"title",e)},expression:"query_option.title"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"請輸入分類",outlined:"",dense:"",color:"purple","hide-details":""},model:{value:t.query_option.category,callback:function(e){t.$set(t.query_option,"category",e)},expression:"query_option.category"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"請輸入單位",outlined:"",dense:"",color:"purple","hide-details":""},model:{value:t.query_option.unit,callback:function(e){t.$set(t.query_option,"unit",e)},expression:"query_option.unit"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"請輸入原價",outlined:"",dense:"",color:"purple","hide-details":""},model:{value:t.query_option.origin_price,callback:function(e){t.$set(t.query_option,"origin_price",e)},expression:"query_option.origin_price"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"請輸入售價",outlined:"",dense:"",color:"purple","hide-details":""},model:{value:t.query_option.price,callback:function(e){t.$set(t.query_option,"price",e)},expression:"query_option.price"}})],1),a("hr"),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:"請輸入產品描述",outlined:"","auto-grow":"",rows:"3",shaped:""},model:{value:t.query_option.description,callback:function(e){t.$set(t.query_option,"description",e)},expression:"query_option.description"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:"請輸入產品說明內容",outlined:"","auto-grow":"",rows:"3",shaped:""},model:{value:t.query_option.content,callback:function(e){t.$set(t.query_option,"content",e)},expression:"query_option.content"}})],1),a("v-col",{attrs:{cols:"12"}},[a("p",[t._v("是否啟用")]),a("v-switch",{model:{value:t.query_option.is_enabled,callback:function(e){t.$set(t.query_option,"is_enabled",e)},expression:"query_option.is_enabled"}})],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"d-flex justify-end",attrs:{cols:"12"}},[a("v-btn",{staticClass:"mr-3",attrs:{color:"green darken-1",dark:""},on:{click:t.uploadProduct}},[t._v("確認")])],1)],1)],1)],1)],1)],1)},lt=[],ct={props:{item:{type:Object}},data:function(){return{dialog:!1,query_option:{imgUrl:"",title:"",category:"",unit:"",origin_price:"",price:"",description:"",content:"",is_enabled:!1}}},computed:{},methods:{getProducts:function(){var t=this;t.$emit("getProducts")},openDialog:function(){var t=this;t.dialog=!0},uploadFile:function(t){var e=this,a=this;a.$store.dispatch("updateLoading",!0);var s="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/upload"),i=this.$refs.file.internalArrayValue[0],o=new FormData;o.append("file-to-upload",i),this.$http.post(s,o,{header:{"Content-type":"multipart/form-data"}}).then(function(t){t.data.success?(a.$store.dispatch("updateLoading",!1),a.query_option.imgUrl=t.data.imageUrl):(a.$store.dispatch("updateLoading",!1),e.$bus.$emit("alertMessage",t.data.message,"danger"))})},uploadProduct:function(){var t=this,e=this;e.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/product");this.$http.post(a,{data:e.query_option}).then(function(a){console.log(a.data),a.data.success&&(e.$store.dispatch("updateLoading",!1),e.getProducts(),t.$bus.$emit("alertMessage","新增成功","success"),e.dialog=!1)})}}},dt=ct,ut=Object($["a"])(dt,nt,lt,!1,null,null,null),pt=ut.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"light-blue darken-1",small:""},on:{click:function(e){return t.openDialog()}}},[t._v("編輯")]),a("v-dialog",{staticStyle:{"z-index":"998"},attrs:{width:"70%"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{staticStyle:{margin:"0 auto"}},[a("div",{staticClass:"d-flex justify-start align-center"},[a("v-icon",{staticClass:"indigo success elevation-4 pa-5 mr-5 ml-5",attrs:{large:"",dark:""}},[t._v("fas fa-file-alt")]),a("div",{staticStyle:{"font-size":"25px"}},[t._v("編輯產品")])],1),a("v-form",{ref:"form",staticClass:"pa-4"},[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mb-6",attrs:{dense:"",outlined:"",color:"purple","item-color":"purple",height:"20px",label:"輸入圖片網址","hide-details":""},model:{value:t.item.imageUrl,callback:function(e){t.$set(t.item,"imageUrl",e)},expression:"item.imageUrl"}}),a("v-file-input",{attrs:{"prepend-inner-icon":"mdi-camera","prepend-icon":"",outlined:"",dense:"",label:"或上傳圖片",color:"purple","hide-details":""},on:{click:t.uploadFile}}),a("img",{staticClass:"img-fluid mt-5",attrs:{src:t.item.imageUrl,alt:""}})],1),a("v-col",[a("v-row",[a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"請輸入標題",outlined:"",dense:"",color:"purple","hide-details":""},model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"請輸入分類",outlined:"",dense:"",color:"purple","hide-details":""},model:{value:t.item.category,callback:function(e){t.$set(t.item,"category",e)},expression:"item.category"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"請輸入單位",outlined:"",dense:"",color:"purple","hide-details":""},model:{value:t.item.unit,callback:function(e){t.$set(t.item,"unit",e)},expression:"item.unit"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"請輸入原價",outlined:"",dense:"",color:"purple","hide-details":""},model:{value:t.item.origin_price,callback:function(e){t.$set(t.item,"origin_price",e)},expression:"item.origin_price"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"請輸入售價",outlined:"",dense:"",color:"purple","hide-details":""},model:{value:t.item.price,callback:function(e){t.$set(t.item,"price",e)},expression:"item.price"}})],1),a("hr"),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:"請輸入產品描述",outlined:"",shaped:""},model:{value:t.item.description,callback:function(e){t.$set(t.item,"description",e)},expression:"item.description"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:"請輸入產品說明內容",outlined:"","auto-grow":"",rows:"3",shaped:""},model:{value:t.item.content,callback:function(e){t.$set(t.item,"content",e)},expression:"item.content"}})],1),a("v-col",{attrs:{cols:"12"}},[a("p",[t._v("是否啟用")]),a("v-switch",{model:{value:t.item.is_enabled,callback:function(e){t.$set(t.item,"is_enabled",e)},expression:"item.is_enabled"}})],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"d-flex justify-end",attrs:{cols:"12"}},[a("v-btn",{staticClass:"mr-3",attrs:{color:"green darken-1",dark:""},on:{click:function(e){return t.uploadProduct(t.item)}}},[t._v("確認")])],1)],1)],1)],1)],1)],1)},vt=[],ft={props:{item:{type:Object}},data:function(){return{dialog:!1,uploadFileLoading:!1}},computed:{},methods:{getProducts:function(){var t=this;t.$emit("getProducts")},openDialog:function(){var t=this;t.dialog=!0,t.$emit("editProduct")},uploadFile:function(){var t=this,e=this;e.uploadFileLoading=!0;var a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/upload");console.log(this);var s=this.$refs.files.files[0],i=new FormData;i.append("file-to-upload",s),this.$http.post(a,i,{header:{"Content-type":"multipart/form-data"}}).then(function(a){a.data.success?(console.log(a.data),e.$set(item,"imageUrl",a.data.imageUrl),e.uploadFileLoading=!1):t.$bus.$emit("alertMessage",a.data.message,"danger")})},uploadProduct:function(t){var e=this,a=this;a.$store.dispatch("updateLoading",!0);var s="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/product/").concat(t.id);this.$http.put(s,{data:t}).then(function(t){console.log(t.data),t.data.success&&(a.$store.dispatch("updateLoading",!1),a.getProducts(),e.$bus.$emit("alertMessage","編輯成功","success"),a.dialog=!1)})}}},ht=ft,gt=Object($["a"])(ht,mt,vt,!1,null,null,null),bt=gt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-layout",{staticClass:"d-flex justify-center"},[a("v-flex",{staticClass:"d-flex justify-end"},[a("v-pagination",{attrs:{length:t.pages.total_pages,color:"green darken-1","next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},on:{input:function(e){return t.getPages(t.pages.current_page)}},model:{value:t.pages.current_page,callback:function(e){t.$set(t.pages,"current_page",e)},expression:"pages.current_page"}})],1)],1)],1)},xt=[],Ct={props:{pages:{type:Object}},methods:{getPages:function(t){this.$emit("callPage",t)}}},yt=Ct,$t=Object($["a"])(yt,_t,xt,!1,null,null,null),kt=$t.exports,Pt={components:{Pagination:kt,CreateProduct:pt,ModifyProduct:bt},data:function(){return{headers:[{text:"分類",value:"category",class:"teal--text darken-1"},{text:"名稱",value:"title",class:"teal--text darken-1",sortable:!1},{text:"原價",value:"origin_price",class:"teal--text darken-1",sortable:!1},{text:"售價",value:"price",class:"teal--text darken-1",sortable:!1},{text:"是否啟用",value:"is_enabled",class:"teal--text darken-1",sortable:!1},{text:"編輯",value:"action",class:"teal--text darken-1",sortable:!1}],items:[],tempProducts:{},isNew:!1,pagination:{},uploadFileLoading:!1}},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;e.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/products?page=").concat(t);this.$http.get(a).then(function(t){e.$store.dispatch("updateLoading",!1),e.items=t.data.products,e.pagination=t.data.pagination})},editProduct:function(t){var e=this;e.tempProducts=Object.assign({},t),e.isNew=!1},openModal:function(t,e){var a=this;rt()("#productModal").modal("show"),t?(a.tempProducts={},a.isNew=!0):(a.tempProducts=Object.assign({},e),a.isNew=!1)},updateProduct:function(){var t=this,e="post",a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/product");t.isNew||(e="put",a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/product/").concat(t.tempProducts.id)),this.$http[e](a,{data:t.tempProducts}).then(function(e){console.log(e.data),e.data.success&&(rt()("#productModal").modal("hide"),t.getProducts())})},removeProduct:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/product/").concat(t.id);this.$http.delete(a).then(function(t){t.data.success&&e.getProducts()})},uploadFile:function(){var t=this,e=this;e.uploadFileLoading=!0;var a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/upload");console.log(this);var s=this.$refs.files.files[0],i=new FormData;i.append("file-to-upload",s),this.$http.post(a,i,{header:{"Content-type":"multipart/form-data"}}).then(function(a){a.data.success?(console.log(a.data),e.$set(e.tempProducts,"imageUrl",a.data.imageUrl),e.uploadFileLoading=!1):t.$bus.$emit("alertMessage",a.data.message,"danger")})}},created:function(){this.getProducts()}},wt=Pt,jt=Object($["a"])(wt,st,it,!1,null,null,null),Lt=jt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orders-area"},[a("v-data-table",{staticClass:"elevation-1 table",staticStyle:{"background-color":"rgb(255, 255, 255)"},attrs:{headers:t.headers,items:t.items,"items-per-page":10,"item-key":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.products",fn:function(e){var s=e.item;return t._l(s.products,function(e){return a("li",{key:e.id},[t._v(t._s(e.product.title))])})}},{key:"item.is_paid",fn:function(e){var s=e.item;return[s.is_paid?a("p",[t._v("已付款")]):a("p",[t._v("未付款")])]}}])}),a("Pagination",{attrs:{pages:t.pagination},on:{callPage:t.getOrders}})],1)},St=[],Et={data:function(){return{headers:[{text:"買家",value:"user.name",class:"teal--text darken-1"},{text:"Email",value:"user.email",class:"teal--text darken-1",sortable:!1},{text:"購買品項",value:"products",class:"teal--text darken-1",sortable:!1},{text:"應付金額",value:"total",class:"teal--text darken-1",sortable:!1},{text:"是否付款",value:"is_paid",class:"teal--text darken-1",sortable:!1}],items:[],products:[],pagination:{}}},components:{Pagination:kt},methods:{getOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;e.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/orders?page=").concat(t);this.$http.get(a).then(function(t){t.data.success&&(e.$store.dispatch("updateLoading",!1),e.items=t.data.orders,e.pagination=t.data.pagination)})}},created:function(){this.getOrders()}},qt=Et,Nt=Object($["a"])(qt,Ot,St,!1,null,null,null),Mt=Nt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"shopping-page-container"},[a("Category"),a("ProductsCard",{attrs:{item:t.filterAry},on:{addCart:t.addCart}}),a("div",{staticClass:"cart-btn-container"},[a("router-link",{staticClass:"btn cart-btn",attrs:{to:"/cart"}},[a("i",{staticClass:"fas fa-shopping-cart fa-2x"},[a("p",{staticClass:"cart-num"},[t._v(t._s(t.cartList.carts.length))])])])],1)],1)])},At=[],Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex justify-space-around pt-2 pb-2 grey darken-4"},[a("v-btn",{staticStyle:{"font-size":"20px"},attrs:{text:"",color:"error",large:""},on:{click:function(e){return t.visibleCat("all")}}},[t._v("全部")]),a("v-btn",{staticStyle:{"font-size":"20px"},attrs:{text:"",color:"error",large:""},on:{click:function(e){return t.visibleCat("north")}}},[t._v("漫遊北歐")]),a("v-btn",{staticStyle:{"font-size":"20px"},attrs:{text:"",color:"error",large:""},on:{click:function(e){return t.visibleCat("south")}}},[t._v("鄉村南歐")])],1)])},Dt=[],Ft={methods:{visibleCat:function(t){var e=this;e.$store.dispatch("visibility",t)}}},Tt=Ft,zt=Object($["a"])(Tt,Ut,Dt,!1,null,null,null),Rt=zt.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"shopping-container row pa-10 teal darken-3"},t._l(t.item,function(e){return a("div",{key:e.id,staticClass:"col-md-4 mb-4"},[a("v-card",[a("v-img",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+e.imageUrl+")"}}),a("div",{staticClass:"card-body"},[a("v-card-subtitle",{staticClass:"pa-0"},[t._v(t._s(e.category))]),a("v-card-title",{staticClass:"pa-0"},[t._v(t._s(e.title))]),a("p",{staticClass:"card-text"},[t._v(t._s(e.content))]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e.origin_price!=e.price?a("del",{staticClass:"h5"},[t._v("原價 "+t._s(t._f("currency")(e.origin_price))+" 元")]):t._e(),e.is_enabled?a("div",{staticClass:"h5",class:{"ml-auto":"item.origin_price != item.price","text-danger":e.origin_price!=e.price}},[t._v("售價 "+t._s(t._f("currency")(e.price))+" 元")]):t._e()])],1),a("div",{staticClass:"card-footer d-flex"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.getProduct(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            查看更多\n          ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(a){return t.addCart(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            加入購物車\n          ")])])],1)],1)}),0),a("v-dialog",{attrs:{width:"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline",staticStyle:{"font-family":"微軟正黑體 !important"}},[t._v(t._s(t.product.title))])]),a("v-card-text",[a("v-img",{attrs:{src:t.product.imageUrl}}),a("p",[t._v(t._s(t.product.content))]),a("p",[t._v(t._s(t.product.description))]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.product.origin_price!=t.product.price?a("del",{staticClass:"h5"},[t._v("原價 "+t._s(t._f("currency")(t.product.origin_price))+" 元")]):t._e(),t.product.price?a("div",{staticClass:"h5"},[t._v("總計 "+t._s(t._f("currency")(t.product.price))+" 元")]):t._e()]),a("v-select",{attrs:{items:t.people_num,label:"請選擇人數",dense:"",outlined:""},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("p",[t._v("小計 "+t._s(t.product.price*t.num)+" 元")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addCart(t.product.id,t.num)}}},[t._v("加入購物車")])],1)],1)],1)],1)},Jt=[],Vt={props:{item:{type:Array}},data:function(){return{product:{},products:[],status:{loadingItem:""},dialog:!1,people_num:["1","2","3","4","5"],num:null}},methods:{addCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this;console.log(e),a.$emit("addCart",t,e),a.dialog=!1},getProduct:function(t){var e=this;e.status.loadingItem=t,e.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/product/").concat(t);this.$http.get(a).then(function(t){e.dialog=!0,e.$store.dispatch("updateLoading",!1),t.data.success&&(e.status.loadingItem="",e.product=t.data.product)})}}},Yt=Vt,Ht=Object($["a"])(Yt,Wt,Jt,!1,null,null,null),Bt=Ht.exports,Gt={data:function(){return{status:{loadingItem:""},cartList:[],products:[]}},components:{Category:Rt,ProductsCard:Bt},computed:{filterAry:function(){var t=this;if("all"==t.$store.state.visibility)return t.products;if("north"==t.$store.state.visibility){var e=[];return t.products.forEach(function(t){"北歐"==t.category&&e.push(t)}),e}if("south"==t.$store.state.visibility){var a=[];return t.products.forEach(function(t){"南歐"==t.category&&a.push(t)}),a}}},methods:{getProducts:function(){var t=this;t.$store.dispatch("updateLoading",!0);var e="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/products");this.$http.get(e).then(function(e){t.$store.dispatch("updateLoading",!1),console.log(e.data),t.products=e.data.products,t.pagination=e.data.pagination})},getCart:function(){var t=this;t.$store.dispatch("updateLoading",!0);var e="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/cart");this.$http.get(e).then(function(e){t.$store.dispatch("updateLoading",!1),e.data.success&&(t.cartList=e.data.data)})},addCart:function(t,e){var a=this,s=this;s.$store.dispatch("updateLoading",!0);var i="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/cart"),o={product_id:t,qty:e};this.$http.post(i,{data:o}).then(function(t){console.log(t.data),s.$store.dispatch("updateLoading",!1),t.data.success&&(a.$bus.$emit("alertMessage","已加入購物車","success"),s.getCart())})}},created:function(){this.getProducts(),this.getCart()}},Kt=Gt,Qt=(a("5e82"),Object($["a"])(Kt,It,At,!1,null,"10005f97",null)),Xt=Qt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart-area"},[a("v-layout",{staticClass:"d-flex justify-center mt-10 mb-10",attrs:{wrap:""}},[a("v-flex",{attrs:{lg10:""}},[a("v-data-table",{staticClass:"elevation-1 table",staticStyle:{"background-color":"rgb(255, 255, 255)"},attrs:{headers:t.headers,items:t.items,"item-key":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.action",fn:function(e){var s=e.item;return[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return e.preventDefault(),t.removeCartItem(s)}}},[a("v-icon",{attrs:{small:"",color:"error"}},[t._v("fas fa-trash-alt")])],1)]}},{key:"item.is_coupon",fn:function(e){var s=e.item;return[s.coupon?a("p",[t._v("已套用")]):a("p",[t._v("未套用")])]}}])})],1),a("v-flex",{attrs:{lg10:""}},[a("v-card",{attrs:{"min-width":"100%"}},[a("v-layout",{staticClass:"d-flex justify-center wrap pa-5"},[a("v-flex",{attrs:{lg5:""}},[a("v-text-field",{staticClass:"mr-5",attrs:{outlined:"",label:"請輸入優惠碼",dense:"","hide-details":""},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),a("v-btn",{attrs:{color:"primary"},on:{click:t.useCoupons}},[t._v("套用優惠碼")])],1),a("v-flex",{attrs:{lg12:""}},[a("v-divider")],1),a("v-flex",{attrs:{lg12:"","justify-end":""}},[a("p",{staticStyle:{"font-size":"20px"}},[t._v("總計:$ "+t._s(t.total))])]),a("v-flex",{attrs:{lg12:"","justify-end":""}},[t.final_total!==t.total?a("p",{staticStyle:{"font-size":"25px",color:"red"}},[t._v("優惠價:$ "+t._s(t.final_total))]):t._e()]),a("v-flex",{attrs:{lg12:"","justify-end":""}},[a("v-btn",{attrs:{color:"primary"},on:{click:t.createOrder}},[t._v("建立訂單")])],1)],1)],1)],1)],1)],1)},te=[],ee={data:function(){return{headers:[{text:"操作",value:"action",class:"teal--text darken-1",sortable:!1},{text:"國家",value:"product.title",class:"teal--text darken-1"},{text:"人數",value:"qty",class:"teal--text darken-1",sortable:!1},{text:"是否套用優惠券",value:"is_coupon",class:"teal--text darken-1",sortable:!1}],items:[],total:null,final_total:null,cartList:[],code:""}},methods:{getCart:function(){var t=this;t.$store.dispatch("updateLoading",!0);var e="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/cart");this.$http.get(e).then(function(e){t.$store.dispatch("updateLoading",!1),e.data.success&&(t.items=e.data.data.carts,t.total=e.data.data.total,t.final_total=e.data.data.final_total)})},removeCartItem:function(t){var e=this;e.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/cart/").concat(t.id);this.$http.delete(a).then(function(t){e.$store.dispatch("updateLoading",!1),e.getCart()})},changePage:function(){this.$router.push("/shopping")},useCoupons:function(){var t=this,e=this;e.$store.dispatch("updateLoading",!0);var a={code:e.code},s="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/coupon");this.$http.post(s,{data:a}).then(function(a){console.log(a.data),a.data.success?(e.$store.dispatch("updateLoading",!1),t.$bus.$emit("alertMessage",a.data.message,"success"),e.getCart()):(e.$store.dispatch("updateLoading",!1),t.$bus.$emit("alertMessage",a.data.message,"danger"))})},createOrder:function(){var t=this;t.$router.push("/order_form")}},created:function(){this.getCart()}},ae=ee,se=(a("6ddd"),Object($["a"])(ae,Zt,te,!1,null,"6047cebf",null)),ie=se.exports,oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("Alert"),s("div",[s("v-toolbar",{staticClass:"d-flex justify-start grey darken-1",staticStyle:{position:"fixed",left:"0",right:"0","z-index":"5"}},[s("div",{staticClass:"mr-5"},[s("a",{staticClass:"text-muted",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(e)}}},[s("img",{attrs:{src:a("4ffd"),alt:""}})])]),s("div",[s("v-btn",{attrs:{text:"",dark:""},on:{click:t.aboutUs}},[t._v("關於我們")]),s("v-btn",{attrs:{text:"",dark:""},on:{click:t.shopping}},[t._v("輕旅歐洲")]),s("v-btn",{attrs:{text:"",dark:""},on:{click:t.admin}},[t._v("ADMIN")])],1)]),s("div",{staticClass:"container-bg",staticStyle:{width:"100%"}},[t._m(0),s("router-view")],1)],1)],1)},re=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cover d-flex align-end"},[a("p",[t._v("TRAVEL NOW")])])}],ne={data:function(){return{}},components:{Alert:X},methods:{changePage:function(){this.$router.push("/")},aboutUs:function(){var t=this;t.$router.push("/")},shopping:function(){var t=this;t.$router.push("/shopping")},admin:function(){var t=this;t.$router.push("/login")}}},le=ne,ce=(a("ee2d"),Object($["a"])(le,oe,re,!1,null,"cf478adc",null)),de=ce.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"my-5 row justify-content-center w-100"},[a("form",{staticClass:"form-card",on:{submit:function(e){return e.preventDefault(),t.creatOrder(e)}}},[t._m(0),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名不得為空")]):t._e()]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}})]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._m(1)])])])},pe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group form-title"},[a("h2",[t._v("基本資料")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right pd pd-b-2"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"submit"}},[t._v("送出訂單")])])}],me={data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{creatOrder:function(){var t=this,e=this;e.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/order"),s=e.form;this.$validator.validate().then(function(i){i?t.$http.post(a,{data:s}).then(function(t){e.$store.dispatch("updateLoading",!1),console.log(t.data),t.data.success&&e.$router.push("/customer_checkout/".concat(t.data.orderId))}):console.log("欄位不完整")})}}},ve=me,fe=(a("a99a"),Object($["a"])(ve,ue,pe,!1,null,"59fc8f3a",null)),he=fe.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticClass:"cart-list-container mt-10",staticStyle:{background:"rgb(255, 255, 255)"}},[a("form",{staticClass:"form-card"},[a("table",{staticClass:"table"},[t._m(0),a("tbody",[t._m(1),t._l(t.order.products,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),a("td",{staticClass:"align-middle text-center"},[t._v(t._s(e.qty))]),a("td",{staticClass:"align-middle text-center"},[t._v(t._s(t._f("currency")(e.final_total)))])])})],2),a("tfoot",{staticClass:"mt-2"},[a("tr",[a("td"),a("td",{staticClass:"align-middle text-center fs-r"},[t._v("總計")]),a("td",{staticClass:"text-center fs-r"},[t._v(t._s(t._f("currency")(t.order.total)))])])])]),a("table",{staticClass:"table mt-5"},[t._m(2),a("tbody",[a("tr",[a("th",{staticClass:"align-middle teal--text"},[t._v("Email")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",{staticClass:"align-middle teal--text"},[t._v("姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",{staticClass:"align-middle teal--text"},[t._v("收件人電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",{staticClass:"align-middle teal--text"},[t._v("收件人地址")]),a("td",[t._v(t._s(t.order.user.address))])]),a("tr",[a("th",{staticClass:"align-middle teal--text"},[t._v("付款狀態")]),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?a("div",{staticClass:"text-right pay-btn"},[a("button",{staticClass:"btn btn-danger mr-5",on:{click:t.payOrder}},[t._v("確認付款")])]):t._e(),!0===t.order.is_paid?a("div",{staticClass:"text-right pay-btn"},[a("router-link",{staticClass:"btn btn-danger mr-5",attrs:{to:"/shopping"}},[t._v("回首頁")])],1):t._e()])])])])},be=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{staticClass:"text-center",attrs:{colspan:"3"}},[a("h2",[t._v("購買資訊")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"h-6"},[a("th",{staticClass:"align-middle teal--text darken-1",attrs:{width:"250"}},[t._v("旅遊地點")]),a("th",{staticClass:"align-middle teal--text darken-1 text-center",attrs:{width:"200"}},[t._v("人數")]),a("th",{staticClass:"align-middle teal--text darken-1 text-center",attrs:{width:"210"}},[t._v("單價")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center personal-info",attrs:{colspan:"2"}},[t._v("個人資料")])])])}],_e={data:function(){return{orderId:"",order:{user:{}}}},methods:{getOrder:function(){var t=this;t.$store.dispatch("updateLoading",!0);var e="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/order/").concat(t.orderId);this.$http.get(e).then(function(e){t.$store.dispatch("updateLoading",!1),t.order=e.data.order})},payOrder:function(){var t=this;t.$store.dispatch("updateLoading",!0);var e="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/pay/").concat(t.orderId);this.$http.post(e).then(function(e){t.$store.dispatch("updateLoading",!1),t.order=e.data.order,t.getOrder()})}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()}},xe=_e,Ce=(a("1cb1"),Object($["a"])(xe,ge,be,!1,null,"8c3b4a7c",null)),ye=Ce.exports,$e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"home-page-container"},[a("div",{staticClass:"welcome"},[a("div",{staticClass:"title-bg flex"},[a("div",[a("v-btn",{attrs:{dark:"",outlined:"",large:""},on:{click:t.shopping}},[t._v("WELCOME EUROPE")])],1)])]),a("div",{staticClass:"hot-product-container"},[a("ul",{staticClass:"hot-list flex pl-0"},[a("li",{staticClass:"list list-one"},[a("div",{staticClass:"hover-effect flex"},[a("v-btn",{attrs:{dark:"",outlined:"",large:""},on:{click:t.shopping}},[t._v("THE LONDON EYE")])],1)]),a("li",{staticClass:"list list-two pa-0"},[a("div",{staticClass:"hover-effect flex"},[a("v-btn",{attrs:{dark:"",outlined:"",large:""},on:{click:t.shopping}},[t._v("ITALY")])],1)])])]),a("div",{staticClass:"slo d-flex align-center justify-center"},[a("div",[a("v-btn",{attrs:{dark:"",outlined:"",large:""},on:{click:t.shopping}},[t._v("ENJOY THE TRIP")])],1)]),t._m(0)])])},ke=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer flex"},[a("p",[t._v("此網站純為練習用 無商業用途")]),t._v("©2019 All Right Reserved | Design by James\n    ")])}],Pe={data:function(){return{}},methods:{shopping:function(){var t=this;t.$router.push("/shopping")}}},we=Pe,je=(a("4e11"),Object($["a"])(we,$e,ke,!1,null,"3a38fd46",null)),Le=je.exports,Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coupon-area"},[a("v-container",{staticStyle:{padding:"unset"},attrs:{fluid:""}}),a("v-layout",{staticClass:"mb-3",attrs:{"justify-end":""}},[a("v-flex",{staticClass:"d-flex justify-end",attrs:{lg2:"",sm2:"",xs12:"","ma-1":""}},[a("v-btn",{attrs:{color:"orange darken-1",dark:""},on:{click:function(e){return t.openModal(!0)}}},[t._v("建立新優惠券")])],1)],1),a("v-data-table",{staticClass:"elevation-1 table",staticStyle:{"background-color":"rgb(255, 255, 255)"},attrs:{headers:t.headers,items:t.items,"items-per-page":10,"item-key":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.is_enabled",fn:function(e){var s=e.item;return[s.is_enabled?a("p",[t._v("是")]):a("p",[t._v("否")])]}},{key:"item.action",fn:function(e){var s=e.item;return[a("v-btn",{staticClass:"mr-5",attrs:{small:"",dark:"",color:"light-blue darken-1"},on:{click:function(e){return t.openModal(!1,s)}}},[t._v("編輯")]),a("v-btn",{attrs:{small:"",dark:"",color:"pink darken-1"},on:{click:function(e){return t.removeCoupons(s)}}},[t._v("刪除")])]}}])}),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"w-100",staticStyle:{"text-align":"-webkit-left"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("優惠券名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.title,expression:"tempCoupons.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入名稱"},domProps:{value:t.tempCoupons.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("折扣數")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.percent,expression:"tempCoupons.percent"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入折扣"},domProps:{value:t.tempCoupons.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"percent",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("到期日")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.due_date,expression:"tempCoupons.due_date"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入期限"},domProps:{value:t.tempCoupons.due_date},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"due_date",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6 w-100"},[a("label",{attrs:{for:"origin_price"}},[t._v("折扣代碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.code,expression:"tempCoupons.code"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入折扣代碼"},domProps:{value:t.tempCoupons.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"code",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.is_enabled,expression:"tempCoupons.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupons.is_enabled)?t._i(t.tempCoupons.is_enabled,null)>-1:t._q(t.tempCoupons.is_enabled,1)},on:{change:function(e){var a=t.tempCoupons.is_enabled,s=e.target,i=s.checked?1:0;if(Array.isArray(a)){var o=null,r=t._i(a,o);s.checked?r<0&&t.$set(t.tempCoupons,"is_enabled",a.concat([o])):r>-1&&t.$set(t.tempCoupons,"is_enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.tempCoupons,"is_enabled",i)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupons}},[t._v("確認")])])])])])],1)},Se=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("新增優惠券")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Ee={data:function(){return{headers:[{text:"折價券名稱",value:"title",class:"teal--text darken-1"},{text:"折扣數",value:"percent",class:"teal--text darken-1",sortable:!1},{text:"到期日",value:"due_date",class:"teal--text darken-1",sortable:!1},{text:"是否啟用",value:"is_enabled",class:"teal--text darken-1",sortable:!1},{text:"編輯",value:"action",class:"teal--text darken-1",sortable:!1}],items:[],coupons:[],tempCoupons:{title:"",is_enabled:0,percent:100,due_date:0,code:""},due_date:new Date,isNew:!1,pagination:{},uploadFileLoading:!1}},methods:{getCoupons:function(){var t=this;t.$store.dispatch("updateLoading",!0);var e="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/coupons");this.$http.get(e).then(function(e){console.log(e.data),e.data.success&&(t.$store.dispatch("updateLoading",!1),t.items=e.data.coupons)})},updateCoupons:function(){var t=this;t.$store.dispatch("updateLoading",!0);var e="post",a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/coupon");if(!t.isNew){e="put";a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/coupon/").concat(t.tempCoupons.id)}this.$http[e](a,{data:t.tempCoupons}).then(function(e){t.$store.dispatch("updateLoading",!1),rt()("#productModal").modal("hide"),t.items=e.data.coupone,t.getCoupons()})},removeCoupons:function(t){var e=this;e.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io/api/jmtravel1","/admin/coupon/").concat(t.id);this.$http.delete(a).then(function(t){t.data.success&&(e.$store.dispatch("updateLoading",!1),e.getCoupons())})},openModal:function(t,e){var a=this;rt()("#productModal").modal("show"),t?(a.tempCoupons={},a.isNew=!0):(a.tempCoupons=Object.assign({},e),a.isNew=!1)}},created:function(){this.getCoupons()},watch:{due_date:function(){var t=this,e=Math.floor(new Date(t.due_date)/1e3);t.tempCoupon.due_date=e}}},qe=Ee,Ne=Object($["a"])(qe,Oe,Se,!1,null,null,null),Me=Ne.exports;s["default"].use(w["a"]);var Ie=new w["a"]({routes:[{path:"*",redirect:"shopping"},{name:"Login",path:"/login",component:q},{name:"Dashboard",path:"/admin",component:at,children:[{name:"Products",path:"products",component:Lt,meta:{requiresAuth:!0}},{name:"Orders",path:"orders",component:Mt,meta:{requiresAuth:!0}},{name:"Coupons",path:"coupons",component:Me,meta:{requiresAuth:!0}}]},{name:"Home",path:"/",component:de,children:[{name:"HomePage",path:"",component:Le},{name:"Shopping",path:"shopping",component:Xt},{name:"CartList",path:"cart",component:ie},{name:"OrderForm",path:"order_form",component:he},{name:"CustomerCheckOut",path:"customer_checkout/:orderId",component:ye}]}]});s["default"].prototype.$bus=new s["default"];var Ae=a("427f"),Ue=a.n(Ae),De=a("ce5b"),Fe=a.n(De);a("bf40"),a("5363");s["default"].use(Fe.a);var Te={},ze=new Fe.a(Te),Re=a("2f62");s["default"].use(Re["a"]);var We=new Re["a"].Store({state:{isLoading:!1,visibility:"all"},actions:{updateLoading:function(t,e){t.commit("LOADING",e)},visibility:function(t,e){t.commit("VISIBILITY",e)}},mutations:{LOADING:function(t,e){t.isLoading=e},VISIBILITY:function(t,e){t.visibility=e}},modules:{}});s["default"].filter("currency",b),s["default"].filter("date",g),s["default"].config.productionTip=!1,s["default"].use(n.a,o.a),l["c"].add(c["a"]),s["default"].component("font-awesome-icon",d["a"]),s["default"].config.productionTip=!1,o.a.defaults.withCredentials=!0,s["default"].component("Loading",p.a),s["default"].use(v["a"]),s["default"].use(h.a);var Je=new v["a"]({locale:"zhTW"});s["default"].use(m["a"],{i18n:Je,dictionary:{zhTW:Ue.a}}),new s["default"]({i18n:Je,render:function(t){return t(P)},router:Ie,vuetify:ze,store:We}).$mount("#app"),Ie.beforeEach(function(t,e,a){if(console.log("to",t,"from",e,"next",a),t.meta.requiresAuth){var s="https://vue-course-api.hexschool.io/api/user/check";o.a.post(s).then(function(e){e.data.success?a():a({path:"/login",query:{redirect:t.fullPath}})})}else a()})},"5e82":function(t,e,a){"use strict";var s=a("55c3"),i=a.n(s);i.a},"6ddd":function(t,e,a){"use strict";var s=a("1e47"),i=a.n(s);i.a},"85ec":function(t,e,a){},a99a:function(t,e,a){"use strict";var s=a("e9ce"),i=a.n(s);i.a},b1d9:function(t,e,a){},c4b5:function(t,e,a){},e29b:function(t,e,a){"use strict";var s=a("2ece"),i=a.n(s);i.a},e9ce:function(t,e,a){},ee2d:function(t,e,a){"use strict";var s=a("286a"),i=a.n(s);i.a}});
//# sourceMappingURL=app.087edd2a.js.map