(function(t){function e(e){for(var s,o,n=e[0],c=e[1],l=e[2],u=0,p=[];u<n.length;u++)o=n[u],i[o]&&p.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,n=1;n<a.length;n++){var c=a[n];0!==i[c]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={app:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02ce":function(t,e,a){},"248f":function(t,e,a){},"2cf8":function(t,e,a){},"2fe3":function(t,e,a){"use strict";var s=a("02ce"),i=a.n(s);i.a},3781:function(t,e,a){},"458f":function(t,e,a){},"4a2f":function(t,e,a){"use strict";var s=a("b1d9"),i=a.n(s);i.a},"4ba2":function(t,e,a){"use strict";var s=a("4e62"),i=a.n(s);i.a},"4e62":function(t,e,a){},"4ffd":function(t,e,a){t.exports=a.p+"img/logo.02f5a937.png"},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),i=a("bc3a"),r=a.n(i),o=a("a7fe"),n=a.n(o),c=(a("4989"),a("ecee")),l=a("c074"),d=a("ad3d"),u=a("9062"),p=a.n(u),m=(a("e40d"),a("7bb1")),v=a("a925"),f=a("0a63"),h=a.n(f),g=function(t){var e=new Date(1e3*t);return e.toLocaleDateString()},_=(a("a481"),a("c5f6"),function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,function(t,e,a){var s=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return s}))}),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},C=[],x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"signIn-container"},[s("form",{staticClass:"form-signin",on:{submit:t.signIn}},[s("img",{staticClass:"mb-4",attrs:{src:a("4ffd"),alt:"",width:"72",height:"72"}}),s("h1",{staticClass:"h3 mb-3 font-weight-normal fs"},[t._v("LOGIN")]),s("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control login-width",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),s("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control login-width",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._m(0),s("button",{staticClass:"btn btn-lg btn-primary btn-block login-width",attrs:{type:"submit"}},[t._v("Sign in")]),s("p",{staticClass:"mt-5 mb-3  fs"},[t._v("© 2017-2018")])])])])},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"checkbox mb-3"},[a("label",{staticClass:"fs"},[a("input",{attrs:{type:"checkbox",value:"remember-me"}}),t._v(" Remember me\n        ")])])}],w={data:function(){return{user:{username:"",password:""}}},methods:{signIn:function(){var t=this,e="https://vue-course-api.hexschool.io/admin/signin";this.$http.post(e,t.user).then(function(e){console.log(e.data),e.data.success&&t.$router.push("/admin/products")})}}},P=w,k=(a("e556"),a("2877")),$=Object(k["a"])(P,x,y,!1,null,null,null),L=$.exports,j={name:"app",components:{Login:L}},E=j,O=(a("5c0b"),Object(k["a"])(E,b,C,!1,null,null,null)),N=O.exports,M=a("8c4f"),A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Alert"),a("Navbar"),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("Sidebar"),a("main",{staticClass:"main col-md-9 ml-sm-auto col-lg-10 pt-3 px-4",attrs:{role:"main"}},[a("router-view")],1)],1)])],1)},D=[],I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0"},[a("a",{staticClass:"navbar-brand col-sm-3 col-md-2 mr-0",attrs:{href:"#"}},[t._v("JM TRAVEL")]),a("input",{staticClass:"form-control form-control-dark w-100",attrs:{type:"text",placeholder:"Search","aria-label":"Search"}}),a("ul",{staticClass:"navbar-nav px-3"},[a("li",{staticClass:"nav-item text-nowrap"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("登出")])])])])},q=[],T={methods:{signOut:function(){var t=this,e="https://vue-course-api.hexschool.io/logout";this.$http.post(e,t.user).then(function(e){e.data.success&&t.$router.push("/homepage")})}}},S=T,F=(a("f905"),Object(k["a"])(S,I,q,!1,null,"4ad9aaad",null)),U=F.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[a("div",{staticClass:"sidebar-sticky"},[t._m(0),a("ul",{staticClass:"nav flex-column mb-2"},[a("li",{staticClass:"nav-item"},[a("i",{staticClass:"fas fa-box-open pd"}),a("router-link",{staticClass:"nav-link in-b",attrs:{to:"/admin/products"}},[t._v("產品列表")])],1),a("li",{staticClass:"nav-item"},[a("i",{staticClass:"fas fa-address-card pd"}),a("router-link",{staticClass:"nav-link in-b",attrs:{to:"/admin/orders"}},[t._v("訂單列表")])],1),a("li",{staticClass:"nav-item"},[a("i",{staticClass:"fas fa-ticket-alt pd"}),a("router-link",{staticClass:"nav-link in-b",attrs:{to:"/admin/coupons"}},[t._v("優惠券")])],1)])])])])},W=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[a("span",[t._v("管理員")]),a("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#"}},[a("span",{attrs:{"data-feather":"plus-circle"}})])])}],J=(a("fd2b"),{}),H=Object(k["a"])(J,R,W,!1,null,"7db654be",null),z=H.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v("\n    "+t._s(e.message)+"\n    "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}),0)},Y=[],B=(a("ac6a"),{name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout(function(){e.messages.forEach(function(a,s){a.timestamp===t&&e.messages.splice(s,1)})},5e3)}},created:function(){var t=this;t.$bus.$on("alertMessage",function(e,a){t.updateMessage(e,a)})}}),G=B,K=(a("4a2f"),Object(k["a"])(G,V,Y,!1,null,null,null)),Q=K.exports,X={components:{Navbar:U,Sidebar:z,Alert:Q}},Z=X,tt=(a("2fe3"),Object(k["a"])(Z,A,D,!1,null,null,null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.openModal(!0)}}},[t._v("建立新產品")]),a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",{staticClass:"card-tbody"},t._l(t.products,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.origin_price)))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.price)))]),a("td",[e.is_enabled?a("span",[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("td",{staticClass:"flex-seprate"},[a("button",{staticClass:"btn btn-outline-primary btn-sm mr-1",on:{click:function(a){return t.openModal(!1,e)}}},[t._v("編輯")]),a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.removeProduct(e)}}},[t._v("刪除")])])])}),0)]),a("Pagination",{attrs:{pages:t.pagination},on:{callPage:t.getProducts}}),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4",staticStyle:{"text-align":"-webkit-left"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.imageUrl,expression:"tempProducts.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProducts.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"imageUrl",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[t._v("\n                    或 上傳圖片\n                    "),t.uploadFileLoading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),a("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),a("img",{staticClass:"img-fluid",attrs:{src:t.tempProducts.imageUrl,alt:""}})]),a("div",{staticClass:"col-sm-8",staticStyle:{"text-align":"-webkit-left"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.title,expression:"tempProducts.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProducts.title},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.tempProducts.category,expression:"tempProducts.category",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProducts.category},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"category",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.unit,expression:"tempProducts.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProducts.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.origin_price,expression:"tempProducts.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProducts.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"origin_price",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.price,expression:"tempProducts.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProducts.price},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"price",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.description,expression:"tempProducts.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProducts.description},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.content,expression:"tempProducts.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProducts.content},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.is_enabled,expression:"tempProducts.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProducts.is_enabled)?t._i(t.tempProducts.is_enabled,null)>-1:t._q(t.tempProducts.is_enabled,1)},on:{change:function(e){var a=t.tempProducts.is_enabled,s=e.target,i=s.checked?1:0;if(Array.isArray(a)){var r=null,o=t._i(a,r);s.checked?o<0&&t.$set(t.tempProducts,"is_enabled",a.concat([r])):o>-1&&t.$set(t.tempProducts,"is_enabled",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.tempProducts,"is_enabled",i)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])])],1)])},st=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{width:"150"}},[t._v("分類")]),a("th",[t._v("名稱")]),a("th",{attrs:{width:"120"}},[t._v("原價")]),a("th",{attrs:{width:"120"}},[t._v("售價")]),a("th",{attrs:{width:"120"}},[t._v("是否啟用")]),a("th",{attrs:{width:"150"}},[t._v("編輯")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("新增產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],it=a("1157"),rt=a.n(it),ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.getPages(t.pages.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.pages.current_page===e}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getPages(e)}}},[t._v(" "+t._s(e)+" ")])])}),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.getPages(t.pages.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},nt=[],ct={props:{pages:{type:Object}},methods:{getPages:function(t){this.$emit("callPage",t)}}},lt=ct,dt=Object(k["a"])(lt,ot,nt,!1,null,null,null),ut=dt.exports,pt={data:function(){return{products:[],tempProducts:{},isNew:!1,pagination:{},uploadFileLoading:!1,isLoading:!1}},components:{Pagination:ut},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;e.isLoading=!0;var a="https://vue-course-api.hexschool.io/api/jamespantest1/admin/products?page=".concat(t);this.$http.get(a).then(function(t){console.log(t.data),e.products=t.data.products,e.pagination=t.data.pagination,e.isLoading=!1})},openModal:function(t,e){var a=this;rt()("#productModal").modal("show"),t?(a.tempProducts={},a.isNew=!0):(a.tempProducts=Object.assign({},e),a.isNew=!1)},updateProduct:function(){var t=this,e="post",a="https://vue-course-api.hexschool.io/api/jamespantest1/admin/product";t.isNew||(e="put",a="https://vue-course-api.hexschool.io/api/jamespantest1/admin/product/".concat(t.tempProducts.id)),this.$http[e](a,{data:t.tempProducts}).then(function(e){console.log(e.data),e.data.success&&(rt()("#productModal").modal("hide"),t.getProducts())})},removeProduct:function(t){var e=this,a="https://vue-course-api.hexschool.io/api/jamespantest1/admin/product/".concat(t.id);this.$http.delete(a).then(function(t){t.data.success&&e.getProducts()})},uploadFile:function(){var t=this,e=this;e.uploadFileLoading=!0;var a="https://vue-course-api.hexschool.io/api/jamespantest1/admin/upload";console.log(this);var s=this.$refs.files.files[0],i=new FormData;i.append("file-to-upload",s),this.$http.post(a,i,{header:{"Content-type":"multipart/form-data"}}).then(function(a){a.data.success?(console.log(a.data),e.$set(e.tempProducts,"imageUrl",a.data.imageUrl),e.uploadFileLoading=!1):t.$bus.$emit("alertMessage",a.data.message,"danger")})}},created:function(){this.getProducts()}},mt=pt,vt=Object(k["a"])(mt,at,st,!1,null,null,null),ft=vt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",{staticClass:"card-tbody"},t._l(t.allOrders,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(t._f("date")(e.create_at)))]),a("td",[t._v(t._s(e.user.email))]),a("td",t._l(e.products,function(e){return a("li",{key:e.id},[t._v(t._s(e.product.title))])}),0),a("td",[t._v(t._s(t._f("currency")(e.total)))]),a("td",[e.is_paid?a("span",{staticClass:"text-success"},[t._v("已付款")]):a("span",{staticClass:"text-danger"},[t._v("未付款")])])])}),0)]),a("Pagination",{attrs:{pages:t.pagination},on:{callPage:t.getOrders}})],1)},gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{width:"120"}},[t._v("購買時間")]),a("th",[t._v("Email")]),a("th",{attrs:{width:"180"}},[t._v("購買品項")]),a("th",{attrs:{width:"120"}},[t._v("應付金額")]),a("th",{attrs:{width:"120"}},[t._v("是否付款")])])}],_t={data:function(){return{allOrders:{products:{},user:{}},pagination:{}}},components:{Pagination:ut},methods:{getOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,a="https://vue-course-api.hexschool.io/api/jamespantest1/admin/orders?page=".concat(t);this.$http.get(a).then(function(t){t.data.success&&(console.log(t),e.allOrders=t.data.orders,e.pagination=t.data.pagination)})}},created:function(){this.getOrders()}},bt=_t,Ct=Object(k["a"])(bt,ht,gt,!1,null,null,null),xt=Ct.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1),a("div",{staticClass:"shopping-page-container"},[a("div",{staticClass:"nav-location-list nav-scroller py-1"},[a("nav",{staticClass:"nav d-flex justify-content-space-around"},[a("a",{staticClass:"p-2 text-muted hvr-underline-from-center",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.visibility="all"}}},[t._v("全部")]),a("a",{staticClass:"p-2 text-muted hvr-underline-from-center",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.visibility="north"}}},[t._v("漫遊北歐")]),a("a",{staticClass:"p-2 text-muted hvr-underline-from-center",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.visibility="south"}}},[t._v("鄉村南歐")])])]),a("div",{staticClass:"shopping-container row"},t._l(t.filterAry,function(e){return a("div",{key:e.id,staticClass:"col-md-4 mb-4"},[a("div",{staticClass:"card border-0 shadow-sm"},[a("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+e.imageUrl+")"}}),a("div",{staticClass:"card-body"},[a("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(e.category))]),a("h5",{staticClass:"card-title"},[a("a",{staticClass:"text-dark card-title",attrs:{href:"#"}},[t._v(t._s(e.title))])]),a("p",{staticClass:"card-text"},[t._v(t._s(e.content))]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e.origin_price!=e.price?a("del",{staticClass:"h5"},[t._v("原價 "+t._s(t._f("currency")(e.origin_price))+" 元")]):t._e(),e.is_enabled?a("div",{staticClass:"h5",class:{"ml-auto":"item.origin_price != item.price","text-danger":e.origin_price!=e.price}},[t._v("售價 "+t._s(t._f("currency")(e.price))+" 元")]):t._e()])]),a("div",{staticClass:"card-footer d-flex"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.getProduct(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n              查看更多\n            ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(a){return t.addCart(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n              加入購物車\n            ")])])])])}),0),a("div",{staticClass:"cart-btn-container"},[a("router-link",{staticClass:"btn cart-btn",attrs:{to:"/cart"}},[a("i",{staticClass:"fas fa-shopping-cart fa-2x"},[a("p",{staticClass:"cart-num"},[t._v(t._s(t.cartList.carts.length))])])])],1),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),a("blockquote",{staticClass:"blockquote mt-3"},[a("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),a("footer",{staticClass:"blockquote-footer text-justify"},[t._v(t._s(t.product.description))])]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.product.origin_price!=t.product.price?a("del",{staticClass:"h5"},[t._v("原價 "+t._s(t._f("currency")(t.product.origin_price))+" 元")]):t._e(),t.product.price?a("div",{staticClass:"h5"},[t._v("總計 "+t._s(t._f("currency")(t.product.price))+" 元")]):t._e()]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.product,"num",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("請選擇人數")]),t._l(10,function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e)+" "+t._s(t.product.unit)+" 人")])})],2)]),a("div",{staticClass:"modal-footer",staticStyle:{"align-items":"baseline"}},[a("p",[t._v("小計 "+t._s(t.product.price*t.product.num)+" 元")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addCart(t.product.id,t.product.num)}}},[t._v("加入購物車")])])])])])])])},wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Pt={data:function(){return{products:[],product:{},status:{loadingItem:""},cartList:[],visibility:"all",isLoading:!1}},methods:{getProducts:function(){var t=this;t.isLoading=!0;var e="https://vue-course-api.hexschool.io/api/jamespantest1/products";this.$http.get(e).then(function(e){t.isLoading=!1,console.log(e.data),t.products=e.data.products,t.pagination=e.data.pagination})},getProduct:function(t){var e=this;e.status.loadingItem=t,e.isLoading=!0,rt()("#productModal").modal("show");var a="https://vue-course-api.hexschool.io/api/jamespantest1/product/".concat(t);this.$http.get(a).then(function(t){e.isLoading=!1,t.data.success&&(e.status.loadingItem="",e.product=t.data.product)})},getCart:function(){var t=this;t.isLoading=!0;var e="https://vue-course-api.hexschool.io/api/jamespantest1/cart";this.$http.get(e).then(function(e){console.log("購物車",e.data.data),t.isLoading=!1,e.data.success&&(t.cartList=e.data.data)})},addCart:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this;s.isLoading=!0;var i="https://vue-course-api.hexschool.io/api/jamespantest1/cart",r={product_id:t,qty:a};this.$http.post(i,{data:r}).then(function(t){console.log(t.data),s.isLoading=!1,t.data.success&&(e.$bus.$emit("alertMessage","已加入購物車","success"),rt()("#productModal").modal("hide"),s.getCart())})},scrollDown:function(){rt()("html,body").animate({scrollTop:rt()(".nav-location-list").offset().top},1e3)}},created:function(){this.getProducts(),this.getCart()},computed:{filterAry:function(){var t=this;if("all"==t.visibility)return t.products;if("north"==t.visibility){var e=[];return t.products.forEach(function(t){"北歐"==t.category&&e.push(t)}),e}if("south"==t.visibility){var a=[];return t.products.forEach(function(t){"南歐"==t.category&&(a.push(t),console.log(a))}),a}}}},kt=Pt,$t=(a("d04f"),Object(k["a"])(kt,yt,wt,!1,null,"4d07adaa",null)),Lt=$t.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1),a("div",{staticClass:"bg"},[0==t.cartList.carts.length?a("div",{staticClass:"cart-list-empty"},[a("h2",[t._v("目前尚無行程")]),a("button",{staticClass:"btn",on:{click:t.changePage}},[t._v("BACK TO TRAVEL")])]):t._e(),0!==t.cartList.carts.length?a("div",{staticClass:"cart-list-container"},[a("table",{staticClass:"table"},[t._m(0),a("tbody",{staticClass:"card-tbody"},t._l(t.cartList.carts,function(e){return a("tr",{key:e.id},[a("td",[a("button",{staticClass:"removeBtn",on:{click:function(a){return a.preventDefault(),t.removeCartItem(e)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),a("td",[t._v("\n              "+t._s(e.product.title)+"\n              "),e.coupon?a("p",{staticClass:"text-primary"},[t._v("已套用優惠券")]):t._e()]),a("td",[t._v(t._s(e.qty))]),e.price?t._e():a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.total)))]),e.price?a("td",[t._v(t._s(e.total))]):t._e(),e.price?a("td",[t._v(t._s(e.total))]):t._e()])}),0)]),a("div",{staticClass:"input-group flex coupons-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"text",name:"",id:"",placeholder:"請輸入優惠碼"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),a("button",{on:{click:t.useCoupons}},[t._v("套用優惠碼")])]),a("div",{staticClass:"check-cart flex"},[a("div",{staticClass:"h5 text-right total-price"},[t._v("總計: "+t._s(t._f("currency")(t.cartList.total)))]),t.cartList.final_total!==t.cartList.total?a("div",{staticClass:"h5 text-right total-price dis-price"},[t._v("優惠價: "+t._s(t._f("currency")(t.cartList.final_total)))]):t._e(),a("router-link",{staticClass:"h5 text-center next-step",attrs:{to:"/order_form"}},[t._v("建立訂單")])],1)]):t._e()])])},Et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{width:"200"}},[a("h2",[t._v("購物車清單")])]),a("th",{attrs:{width:"250"}},[t._v("國家")]),a("th",[t._v("人數")]),a("th",{attrs:{width:"120"}},[t._v("小計")])])}],Ot={data:function(){return{cartList:[],isLoading:!1,isempty:!1,code:""}},methods:{getCart:function(){var t=this;t.isLoading=!0;var e="https://vue-course-api.hexschool.io/api/jamespantest1/cart";this.$http.get(e).then(function(e){console.log(e.data.data),t.isLoading=!1,e.data.success&&(t.cartList=e.data.data,console.log(t.cartList))})},removeCartItem:function(t){var e=this,a="https://vue-course-api.hexschool.io/api/jamespantest1/cart/".concat(t.id);this.$http.delete(a).then(function(t){console.log(t.data),e.getCart()})},changePage:function(){this.$router.push("/shopping")},useCoupons:function(){var t=this;t.isLoading=!0;var e={code:t.code},a="https://vue-course-api.hexschool.io/api/jamespantest1/coupon";this.$http.post(a,{data:e}).then(function(e){console.log(e.data),t.isLoading=!1,t.getCart()})}},created:function(){this.getCart()}},Nt=Ot,Mt=(a("4ba2"),Object(k["a"])(Nt,jt,Et,!1,null,"c8cd1b4a",null)),At=Mt.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Alert"),s("div",{staticClass:"container"},[s("div",{staticClass:"cover flex"},[s("header",{staticClass:"blog-header fixed-title"},[s("div",{staticClass:"row flex-nowrap justify-content-between align-items-center"},[s("div",{staticClass:"col-4 pt-1"},[s("a",{staticClass:"text-muted",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(e)}}},[s("img",{attrs:{src:a("4ffd"),alt:""}})])]),s("div",{staticClass:"col-4 d-flex justify-content-end align-items-center bg-b"},[s("router-link",{staticClass:"btn btn-sm",attrs:{to:"/"}},[t._v("關於我們")]),s("router-link",{staticClass:"btn btn-sm",attrs:{to:"/shopping"}},[t._v("輕旅歐洲")]),s("router-link",{staticClass:"btn btn-sm",attrs:{to:"/login"}},[t._v("ADMIN")])],1)])]),s("p",[t._v("TRAVEL NOW")])]),s("main",{attrs:{role:"main"}},[s("router-view")],1)])],1)},It=[],qt={data:function(){return{}},components:{Alert:Q},methods:{changePage:function(){this.$router.push("/")}}},Tt=qt,St=(a("d7fb"),Object(k["a"])(Tt,Dt,It,!1,null,"1cae6340",null)),Ft=St.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"form-card",on:{submit:function(e){return e.preventDefault(),t.creatOrder(e)}}},[t._m(0),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名不得為空")]):t._e()]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}})]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._m(1)])])])},Rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group form-title"},[a("h2",[t._v("基本資料")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right pd pd-b-2"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"submit"}},[t._v("送出訂單")])])}],Wt={data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{creatOrder:function(){var t=this,e=this,a="https://vue-course-api.hexschool.io/api/jamespantest1/order",s=e.form;this.$validator.validate().then(function(i){i?t.$http.post(a,{data:s}).then(function(t){e.isLoading=!1,console.log(t.data),t.data.success&&e.$router.push("/customer_checkout/".concat(t.data.orderId))}):console.log("欄位不完整")})}}},Jt=Wt,Ht=(a("fdcf"),Object(k["a"])(Jt,Ut,Rt,!1,null,"6cefd1df",null)),zt=Ht.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bg"},[a("div",{staticClass:"cart-list-container"},[a("br"),a("form",{staticClass:"form-card",on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[a("table",{staticClass:"table"},[t._m(0),a("tbody",[t._m(1),t._l(t.order.products,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),a("td",{staticClass:"align-middle text-center"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),a("td",{staticClass:"align-middle text-center"},[t._v(t._s(t._f("currency")(e.final_total)))])])})],2),a("tfoot",{staticClass:"mt-2"},[a("tr",[a("td"),a("td",{staticClass:"align-middle text-center fs-r"},[t._v("總計")]),a("td",{staticClass:"text-center fs-r"},[t._v(t._s(t._f("currency")(t.order.total)))])])])]),a("table",{staticClass:"table mt-5"},[t._m(2),a("tbody",[a("tr",[a("th",{staticClass:"align-middle fs"},[t._v("Email")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",{staticClass:"align-middle fs"},[t._v("姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",{staticClass:"align-middle fs"},[t._v("收件人電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",{staticClass:"align-middle fs"},[t._v("收件人地址")]),a("td",[t._v(t._s(t.order.user.address))])]),a("tr",[a("th",{staticClass:"align-middle fs"},[t._v("付款狀態")]),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?a("div",{staticClass:"text-right pay-btn"},[a("button",{staticClass:"btn btn-danger mr-5"},[t._v("確認付款")])]):t._e(),!0===t.order.is_paid?a("div",{staticClass:"text-right pay-btn"},[a("router-link",{staticClass:"btn btn-danger mr-5",attrs:{to:"/shopping"}},[t._v("回首頁")])],1):t._e()])])])])},Yt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{staticClass:"text-center",attrs:{colspan:"3"}},[a("h2",[t._v("購買資訊")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"h-6"},[a("th",{staticClass:"cl align-middle",attrs:{width:"250"}},[t._v("旅遊地點")]),a("th",{staticClass:"cl align-middle text-center",attrs:{width:"200"}},[t._v("人數")]),a("th",{staticClass:"text-center cl align-middle",attrs:{width:"210"}},[t._v("單價")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center personal-info",attrs:{colspan:"2"}},[t._v("個人資料")])])])}],Bt={data:function(){return{orderId:"",order:{user:{}}}},methods:{getOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/jamespantest1/order/".concat(t.orderId);this.$http.get(e).then(function(e){t.order=e.data.order,console.log(e)})},payOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/jamespantest1/pay/".concat(t.orderId);this.$http.post(e).then(function(e){t.order=e.data.order,console.log(e),t.getOrder()})}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()}},Gt=Bt,Kt=(a("d0d5"),Object(k["a"])(Gt,Vt,Yt,!1,null,"82df1aae",null)),Qt=Kt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"home-page-container"},[a("div",{staticClass:"welcome"},[a("div",{staticClass:"title-bg flex"},[a("div",{staticClass:"title"},[a("router-link",{attrs:{to:"/shopping"}},[t._v("WELCOME EUROPE")])],1)])]),a("div",{staticClass:"hot-product-container"},[a("ul",{staticClass:"hot-list flex"},[a("li",{staticClass:"list list-one"},[a("div",{staticClass:"hover-effect flex"},[a("router-link",{attrs:{to:"/shopping"}},[t._v("THE LONDON EYE")])],1)]),a("li",{staticClass:"list list-two"},[a("div",{staticClass:"hover-effect flex"},[a("router-link",{attrs:{to:"/shopping"}},[t._v("ITALY")])],1)])])]),a("div",{staticClass:"slo"},[a("div",{staticClass:"slo-effect flex"},[a("router-link",{staticClass:"flex",attrs:{to:"/shopping"}},[t._v("ENJOY THE TRIP")])],1)]),t._m(0)])])},Zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer flex"},[a("p",[t._v("此網站純為練習用 無商業用途")]),t._v("©2019 All Right Reserved | Design by James\n    ")])}],te=(a("c056"),{}),ee=Object(k["a"])(te,Xt,Zt,!1,null,"62c1a1ef",null),ae=ee.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.openModal(!0)}}},[t._v("建立新優惠券\n    ")]),a("table",{staticClass:"table mt-4"},[t._m(0),t._l(t.coupons,function(e){return a("tbody",{key:e.id,staticClass:"card-tbody"},[a("tr",[a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.percent))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.due_date))]),a("td",[1===e.is_enabled?a("span",[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("td",{staticClass:"flex-seprate"},[a("button",{staticClass:"btn btn-outline-primary btn-sm mr-1",on:{click:function(a){return t.openModal(!1,e)}}},[t._v("編輯")]),a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.removeCoupons(e)}}},[t._v("刪除")])])])])})],2),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"w-100",staticStyle:{"text-align":"-webkit-left"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("優惠券名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.title,expression:"tempCoupons.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入名稱"},domProps:{value:t.tempCoupons.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("折扣數")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.percent,expression:"tempCoupons.percent"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入折扣"},domProps:{value:t.tempCoupons.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"percent",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("到期日")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.due_date,expression:"tempCoupons.due_date"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入期限"},domProps:{value:t.tempCoupons.due_date},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"due_date",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6 w-100"},[a("label",{attrs:{for:"origin_price"}},[t._v("折扣代碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.code,expression:"tempCoupons.code"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入折扣代碼"},domProps:{value:t.tempCoupons.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"code",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.is_enabled,expression:"tempCoupons.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupons.is_enabled)?t._i(t.tempCoupons.is_enabled,null)>-1:t._q(t.tempCoupons.is_enabled,1)},on:{change:function(e){var a=t.tempCoupons.is_enabled,s=e.target,i=s.checked?1:0;if(Array.isArray(a)){var r=null,o=t._i(a,r);s.checked?o<0&&t.$set(t.tempCoupons,"is_enabled",a.concat([r])):o>-1&&t.$set(t.tempCoupons,"is_enabled",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.tempCoupons,"is_enabled",i)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupons}},[t._v("確認")])])])])])])])},ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{attrs:{width:"150"}},[t._v("名稱")]),a("th",{attrs:{width:"120"}},[t._v("折扣數")]),a("th",{attrs:{width:"120"}},[t._v("到期日")]),a("th",{attrs:{width:"120"}},[t._v("是否啟用")]),a("th",{attrs:{width:"150"}},[t._v("編輯")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("新增優惠券")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],re={data:function(){return{coupons:[],tempCoupons:{title:"",is_enabled:0,percent:100,due_date:0,code:""},due_date:new Date,isNew:!1,pagination:{},uploadFileLoading:!1,isLoading:!1}},methods:{getCoupons:function(){var t=this;t.isLoading=!0;var e="https://vue-course-api.hexschool.io/api/jamespantest1/admin/coupons";this.$http.get(e).then(function(e){e.data.success&&(t.isLoading=!1,t.coupons=e.data.coupons,console.log(t.coupons))})},updateCoupons:function(){var t=this;t.isLoading=!0;var e="post",a="https://vue-course-api.hexschool.io/api/jamespantest1/admin/coupon";if(!t.isNew){e="put";a="https://vue-course-api.hexschool.io/api/jamespantest1/admin/coupon/".concat(t.tempCoupons.id)}this.$http[e](a,{data:t.tempCoupons}).then(function(e){t.isLoading=!1,t.coupons=e.data.coupone,rt()("#productModal").modal("hide"),t.getCoupons()})},removeCoupons:function(t){var e=this,a="https://vue-course-api.hexschool.io/api/jamespantest1/admin/coupon/".concat(t.id);this.$http.delete(a).then(function(t){t.data.success&&e.getCoupons()})},openModal:function(t,e){var a=this;rt()("#productModal").modal("show"),t?(a.tempCoupons={},a.isNew=!0):(a.tempCoupons=Object.assign({},e),a.isNew=!1)}},created:function(){this.getCoupons()},watch:{due_date:function(){var t=this,e=Math.floor(new Date(t.due_date)/1e3);t.tempCoupon.due_date=e}}},oe=re,ne=Object(k["a"])(oe,se,ie,!1,null,null,null),ce=ne.exports;s["a"].use(M["a"]);var le=new M["a"]({routes:[{path:"*",redirect:"shopping"},{name:"Login",path:"/login",component:L},{name:"Dashboard",path:"/admin",component:et,children:[{name:"Products",path:"products",component:ft,meta:{requiresAuth:!0}},{name:"Orders",path:"orders",component:xt,meta:{requiresAuth:!0}},{name:"Coupons",path:"coupons",component:ce,meta:{requiresAuth:!0}}]},{name:"Home",path:"/",component:Ft,children:[{name:"HomePage",path:"",component:ae},{name:"Shopping",path:"shopping",component:Lt},{name:"CartList",path:"cart",component:At},{name:"OrderForm",path:"order_form",component:zt},{name:"CustomerCheckOut",path:"customer_checkout/:orderId",component:Qt}]}]});s["a"].prototype.$bus=new s["a"];var de=a("427f"),ue=a.n(de);s["a"].filter("currency",_),s["a"].filter("date",g),s["a"].config.productionTip=!1,s["a"].use(n.a,r.a),c["c"].add(l["a"]),s["a"].component("font-awesome-icon",d["a"]),s["a"].config.productionTip=!1,r.a.defaults.withCredentials=!0,s["a"].component("Loading",p.a),s["a"].use(v["a"]),s["a"].use(h.a);var pe=new v["a"]({locale:"zhTW"});s["a"].use(m["a"],{i18n:pe,dictionary:{zhTW:ue.a}}),new s["a"]({i18n:pe,render:function(t){return t(N)},router:le}).$mount("#app"),le.beforeEach(function(t,e,a){if(console.log("to",t,"from",e,"next",a),t.meta.requiresAuth){var s="https://vue-course-api.hexschool.io/api/user/check";r.a.post(s).then(function(e){e.data.success?a():a({path:"/login",query:{redirect:t.fullPath}})})}else a()})},"5c0b":function(t,e,a){"use strict";var s=a("458f"),i=a.n(s);i.a},"906c":function(t,e,a){},b1d9:function(t,e,a){},c056:function(t,e,a){"use strict";var s=a("2cf8"),i=a.n(s);i.a},c396:function(t,e,a){},d04f:function(t,e,a){"use strict";var s=a("dade"),i=a.n(s);i.a},d0d5:function(t,e,a){"use strict";var s=a("d4c8"),i=a.n(s);i.a},d4c8:function(t,e,a){},d7fb:function(t,e,a){"use strict";var s=a("906c"),i=a.n(s);i.a},dade:function(t,e,a){},e530:function(t,e,a){},e556:function(t,e,a){"use strict";var s=a("e530"),i=a.n(s);i.a},f905:function(t,e,a){"use strict";var s=a("3781"),i=a.n(s);i.a},fd2b:function(t,e,a){"use strict";var s=a("248f"),i=a.n(s);i.a},fdcf:function(t,e,a){"use strict";var s=a("c396"),i=a.n(s);i.a}});
//# sourceMappingURL=app.cd752c76.js.map