(function(t){function e(e){for(var s,r,n=e[0],l=e[1],c=e[2],u=0,p=[];u<n.length;u++)r=n[u],i[r]&&p.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},o=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02ce":function(t,e,a){},"034f":function(t,e,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},2200:function(t,e,a){},"255a":function(t,e,a){"use strict";var s=a("e086"),i=a.n(s);i.a},"286a":function(t,e,a){},"2ece":function(t,e,a){},"2fe3":function(t,e,a){"use strict";var s=a("02ce"),i=a.n(s);i.a},4727:function(t,e,a){},"4a2f":function(t,e,a){"use strict";var s=a("b1d9"),i=a.n(s);i.a},"4e11":function(t,e,a){"use strict";var s=a("4727"),i=a.n(s);i.a},"4ffd":function(t,e,a){t.exports=a.p+"img/logo.02f5a937.png"},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),i=a("bc3a"),o=a.n(i),r=a("a7fe"),n=a.n(r),l=(a("4989"),a("ecee")),c=a("c074"),d=a("ad3d"),u=a("9062"),p=a.n(u),m=(a("e40d"),a("7bb1")),v=a("a925"),f=a("0a63"),g=a.n(f),_=function(t){var e=new Date(1e3*t);return e.toLocaleDateString()},h=(a("a481"),a("c5f6"),function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,function(t,e,a){var s=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return s}))}),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticStyle:{"background-color":"rgb(238, 238, 238)"}},[a("router-view")],1)},C=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{staticClass:"d-flex justify-center align-center",staticStyle:{height:"100vh"}},[a("v-card",{attrs:{width:"500"}},[a("v-toolbar",{attrs:{color:"teal darken-1",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Login form")])],1),a("v-card-text",[a("v-form",{staticStyle:{width:"100%"},on:{submit:t.signIn}},[a("v-layout",{staticClass:"flex-column justify-center"},[a("v-flex",{attrs:{lg12:""}},[a("v-text-field",{attrs:{label:"Email address",outlined:"",autofocus:""},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),a("v-flex",{attrs:{lg12:""}},[a("v-text-field",{attrs:{label:"Password","append-icon":t.password_show?"mdi-eye":"mdi-eye-off",type:t.password_show?"text":"password",outlined:"",autofocus:""},on:{"click:append":function(e){t.password_show=!t.password_show}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),a("v-flex",{staticClass:"justify-end",attrs:{lg12:""}},[a("input",{attrs:{type:"checkbox",value:"remember-me"}}),t._v(" Remember me\n            ")]),a("v-flex",{staticClass:"justify-center",attrs:{lg12:""}},[a("v-btn",{attrs:{color:"teal darken-1",dark:"",type:"submit"}},[t._v("Sign in")])],1),a("v-flex",{staticClass:"justify-center mt-5",attrs:{lg12:""}},[a("p",[t._v("© 2017-2018")])])],1)],1)],1)],1)],1)],1)},y=[],P={data:function(){return{user:{username:"",password:""},password_show:!1}},methods:{signIn:function(){var t=this,e="https://vue-course-api.hexschool.io/admin/signin";this.$http.post(e,t.user).then(function(e){console.log(e.data),e.data.success&&t.$router.push("/admin/products")})}}},k=P,E=a("2877"),w=Object(E["a"])(k,x,y,!1,null,null,null),$=w.exports,O={name:"App",components:{Login:$}},A=O,L=(a("034f"),Object(E["a"])(A,b,C,!1,null,null,null)),N=L.exports,j=a("8c4f"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("Alert"),a("Navbar"),a("div",{staticClass:"content"},[a("Sidebar"),a("router-view")],1)],1)},U=[],V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-toolbar",{staticClass:"indigo darken-2",staticStyle:{position:"fixed",left:"0",right:"0","z-index":"5"},attrs:{dense:"",dark:""}},[a("v-toolbar-title",[t._v("JM TRAVEL")]),a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("登出")])],1)},M=[],I={methods:{signOut:function(){var t=this,e="https://vue-course-api.hexschool.io/logout";this.$http.post(e,t.user).then(function(e){e.data.success&&t.$router.push("/homepage")})}}},D=I,R=(a("e29b"),Object(E["a"])(D,V,M,!1,null,"42710cdb",null)),B=R.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{staticClass:"side-bar",staticStyle:{position:"fixed",left:"0",top:"48.3px",bottom:"0","z-index":"997"},attrs:{dark:"",permanent:""}},[a("v-img",{staticStyle:{"background-position":"center center"},attrs:{src:"https://demos.creative-tim.com/material-dashboard-pro/assets/img/sidebar-3.jpg",height:"100%"}},[a("v-layout",{staticClass:"fill-height pa-0",staticStyle:{height:"100vh","background-color":"rgba(0, 0, 0, 0.7)","border-radius":"unset"},attrs:{column:"",tag:"v-list"}},[a("v-list",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"pl-4"},[t._v("Admin")])],1)],1),a("v-divider",{staticClass:"ma-0"}),a("v-list",t._l(t.items,function(e){return a("v-list-group",{key:e.title,attrs:{"prepend-icon":e.action,"no-action":"","active-class":"success--text"},model:{value:e.active,callback:function(a){t.$set(e,"active",a)},expression:"item.active"}},[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item",{staticClass:"pa-0"},[t._v(t._s(e.title))])],1)],1),t._l(e.items,function(e){return a("v-list-item",{key:e.title,staticStyle:{background:"rgba(81, 81, 81, 0.4)","text-decoration":"none"},attrs:{ripple:"",to:e.link,color:"success"}},[a("v-list-item-content",[a("v-list-item",{domProps:{textContent:t._s(e.title)}},[t._v(">")])],1)],1)})],2)}),1)],1)],1)],1)],1)},T=[],F={data:function(){return{items:[{action:"fas fa-box-open",title:"產品管理",active:!1,items:[{title:"產品列表",link:"/admin/products"}]},{action:"fas fa-address-card",title:"訂單管理",active:!1,items:[{title:"訂單列表",link:"/admin/orders"}]},{action:"fas fa-ticket-alt",title:"活動管理",active:!1,items:[{title:"優惠券",link:"/admin/coupons"}]}]}}},z=F,W=Object(E["a"])(z,q,T,!1,null,null,null),J=W.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v("\n    "+t._s(e.message)+"\n    "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}),0)},Y=[],G=(a("ac6a"),{name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout(function(){e.messages.forEach(function(a,s){a.timestamp===t&&e.messages.splice(s,1)})},5e3)}},created:function(){var t=this;t.$bus.$on("alertMessage",function(e,a){t.updateMessage(e,a)})}}),K=G,Q=(a("4a2f"),Object(E["a"])(K,H,Y,!1,null,null,null)),X=Q.exports,Z={components:{Navbar:B,Sidebar:J,Alert:X}},tt=Z,et=(a("2fe3"),Object(E["a"])(tt,S,U,!1,null,null,null)),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products-area"},[a("v-container",{staticStyle:{padding:"unset"},attrs:{fluid:""}},[a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1),a("v-layout",{staticClass:"mb-3",attrs:{"justify-end":""}},[a("v-flex",{staticClass:"d-flex justify-end",attrs:{lg2:"",sm2:"",xs12:"","ma-1":""}},[a("v-btn",{attrs:{color:"orange darken-1",dark:""},on:{click:function(e){return t.openModal(!0)}}},[t._v("建立新產品")])],1)],1),a("v-data-table",{staticClass:"elevation-1 table",staticStyle:{"background-color":"rgb(255, 255, 255)"},attrs:{headers:t.headers,items:t.items,"items-per-page":10,"item-key":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.is_enabled",fn:function(e){var s=e.item;return[s.is_enabled?a("p",[t._v("是")]):a("p",[t._v("否")])]}},{key:"item.action",fn:function(e){var s=e.item;return[a("v-btn",{staticClass:"mr-5",attrs:{small:"",dark:"",color:"light-blue darken-1"},on:{click:function(e){return t.openModal(!1,s)}}},[t._v("編輯")]),a("v-btn",{attrs:{small:"",dark:"",color:"pink darken-1"},on:{click:function(e){return t.removeProduct(s)}}},[t._v("刪除")])]}}])}),a("Pagination",{attrs:{pages:t.pagination},on:{callPage:t.getProducts}}),a("div",{staticClass:"text-right"},[a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("新增產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4",staticStyle:{"text-align":"-webkit-left"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.imageUrl,expression:"tempProducts.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProducts.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"imageUrl",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[t._v("\n                      或 上傳圖片\n                      "),t.uploadFileLoading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),a("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),a("img",{staticClass:"img-fluid",attrs:{src:t.tempProducts.imageUrl,alt:""}})]),a("div",{staticClass:"col-sm-8",staticStyle:{"text-align":"-webkit-left"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.title,expression:"tempProducts.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProducts.title},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.tempProducts.category,expression:"tempProducts.category",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProducts.category},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"category",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.unit,expression:"tempProducts.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProducts.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.origin_price,expression:"tempProducts.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProducts.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"origin_price",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.price,expression:"tempProducts.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProducts.price},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"price",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.description,expression:"tempProducts.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProducts.description},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.content,expression:"tempProducts.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProducts.content},on:{input:function(e){e.target.composing||t.$set(t.tempProducts,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.is_enabled,expression:"tempProducts.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProducts.is_enabled)?t._i(t.tempProducts.is_enabled,null)>-1:t._q(t.tempProducts.is_enabled,1)},on:{change:function(e){var a=t.tempProducts.is_enabled,s=e.target,i=s.checked?1:0;if(Array.isArray(a)){var o=null,r=t._i(a,o);s.checked?r<0&&t.$set(t.tempProducts,"is_enabled",a.concat([o])):r>-1&&t.$set(t.tempProducts,"is_enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.tempProducts,"is_enabled",i)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])])])],1)],1)},it=[],ot=a("1157"),rt=a.n(ot),nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-layout",{staticClass:"d-flex justify-center"},[a("v-flex",{staticClass:"d-flex justify-end"},[a("v-pagination",{attrs:{length:t.pages.total_pages,color:"green darken-1","next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},on:{input:function(e){return t.getPages(t.pages.current_page)}},model:{value:t.pages.current_page,callback:function(e){t.$set(t.pages,"current_page",e)},expression:"pages.current_page"}})],1)],1)],1)},lt=[],ct={props:{pages:{type:Object}},methods:{getPages:function(t){this.$emit("callPage",t)}}},dt=ct,ut=Object(E["a"])(dt,nt,lt,!1,null,null,null),pt=ut.exports,mt={data:function(){return{headers:[{text:"分類",value:"category",class:"teal--text darken-1"},{text:"名稱",value:"title",class:"teal--text darken-1",sortable:!1},{text:"原價",value:"origin_price",class:"teal--text darken-1",sortable:!1},{text:"售價",value:"price",class:"teal--text darken-1",sortable:!1},{text:"是否啟用",value:"is_enabled",class:"teal--text darken-1",sortable:!1},{text:"編輯",value:"action",class:"teal--text darken-1",sortable:!1}],items:[],tempProducts:{},isNew:!1,pagination:{},uploadFileLoading:!1,isLoading:!1}},components:{Pagination:pt},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;e.isLoading=!0;var a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/admin/products?page=").concat(t);this.$http.get(a).then(function(t){console.log(t.data),e.items=t.data.products,e.pagination=t.data.pagination,e.isLoading=!1})},openModal:function(t,e){var a=this;rt()("#productModal").modal("show"),t?(a.tempProducts={},a.isNew=!0):(a.tempProducts=Object.assign({},e),a.isNew=!1)},updateProduct:function(){var t=this,e="post",a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/admin/product");t.isNew||(e="put",a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/admin/product/").concat(t.tempProducts.id)),this.$http[e](a,{data:t.tempProducts}).then(function(e){console.log(e.data),e.data.success&&(rt()("#productModal").modal("hide"),t.getProducts())})},removeProduct:function(t){var e=this,a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/admin/product/").concat(t.id);this.$http.delete(a).then(function(t){t.data.success&&e.getProducts()})},uploadFile:function(){var t=this,e=this;e.uploadFileLoading=!0;var a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/admin/upload");console.log(this);var s=this.$refs.files.files[0],i=new FormData;i.append("file-to-upload",s),this.$http.post(a,i,{header:{"Content-type":"multipart/form-data"}}).then(function(a){a.data.success?(console.log(a.data),e.$set(e.tempProducts,"imageUrl",a.data.imageUrl),e.uploadFileLoading=!1):t.$bus.$emit("alertMessage",a.data.message,"danger")})}},created:function(){this.getProducts()}},vt=mt,ft=Object(E["a"])(vt,st,it,!1,null,null,null),gt=ft.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orders-area"},[a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1),a("v-data-table",{staticClass:"elevation-1 table",staticStyle:{"background-color":"rgb(255, 255, 255)"},attrs:{headers:t.headers,items:t.items,"items-per-page":10,"item-key":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.products",fn:function(e){var s=e.item;return t._l(s.products,function(e){return a("li",{key:e.id},[t._v(t._s(e.product.title))])})}},{key:"item.is_paid",fn:function(e){var s=e.item;return[s.is_paid?a("p",[t._v("已付款")]):a("p",[t._v("未付款")])]}}])}),a("Pagination",{attrs:{pages:t.pagination},on:{callPage:t.getOrders}})],1)},ht=[],bt={data:function(){return{headers:[{text:"買家",value:"user.name",class:"teal--text darken-1"},{text:"Email",value:"user.email",class:"teal--text darken-1",sortable:!1},{text:"購買品項",value:"products",class:"teal--text darken-1",sortable:!1},{text:"應付金額",value:"total",class:"teal--text darken-1",sortable:!1},{text:"是否付款",value:"is_paid",class:"teal--text darken-1",sortable:!1}],items:[],products:[],isLoading:!1,pagination:{}}},components:{Pagination:pt},methods:{getOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;e.isLoading=!0;var a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/admin/orders?page=").concat(t);this.$http.get(a).then(function(t){t.data.success&&(e.items=t.data.orders,console.log(e.items),e.pagination=t.data.pagination,e.isLoading=!1)})}},created:function(){this.getOrders()}},Ct=bt,xt=Object(E["a"])(Ct,_t,ht,!1,null,null,null),yt=xt.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"shopping-page-container"},[a("Category",{on:{visibleCat:t.visibleCat}}),a("div",{staticClass:"shopping-container row pa-10 teal darken-3"},t._l(t.filterAry,function(e){return a("div",{key:e.id,staticClass:"col-md-4 mb-4"},[a("v-card",[a("v-img",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+e.imageUrl+")"}}),a("div",{staticClass:"card-body"},[a("v-card-subtitle",{staticClass:"pa-0"},[t._v(t._s(e.category))]),a("v-card-title",{staticClass:"pa-0"},[t._v(t._s(e.title))]),a("p",{staticClass:"card-text"},[t._v(t._s(e.content))]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e.origin_price!=e.price?a("del",{staticClass:"h5"},[t._v("原價 "+t._s(t._f("currency")(e.origin_price))+" 元")]):t._e(),e.is_enabled?a("div",{staticClass:"h5",class:{"ml-auto":"item.origin_price != item.price","text-danger":e.origin_price!=e.price}},[t._v("售價 "+t._s(t._f("currency")(e.price))+" 元")]):t._e()])],1),a("div",{staticClass:"card-footer d-flex"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.getProduct(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n              查看更多\n            ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(a){return t.addCart(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n              加入購物車\n            ")])])],1)],1)}),0),a("div",{staticClass:"cart-btn-container"},[a("router-link",{staticClass:"btn cart-btn",attrs:{to:"/cart"}},[a("i",{staticClass:"fas fa-shopping-cart fa-2x"},[a("p",{staticClass:"cart-num"},[t._v(t._s(t.cartList.carts.length))])])])],1),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),a("blockquote",{staticClass:"blockquote mt-3"},[a("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),a("footer",{staticClass:"blockquote-footer text-justify"},[t._v(t._s(t.product.description))])]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.product.origin_price!=t.product.price?a("del",{staticClass:"h5"},[t._v("原價 "+t._s(t._f("currency")(t.product.origin_price))+" 元")]):t._e(),t.product.price?a("div",{staticClass:"h5"},[t._v("總計 "+t._s(t._f("currency")(t.product.price))+" 元")]):t._e()]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.product,"num",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("請選擇人數")]),t._l(10,function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e)+" "+t._s(t.product.unit)+" 人")])})],2)]),a("div",{staticClass:"modal-footer",staticStyle:{"align-items":"baseline"}},[a("p",[t._v("小計 "+t._s(t.product.price*t.product.num)+" 元")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addCart(t.product.id,t.product.num)}}},[t._v("加入購物車")])])])])])],1)],1)},kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex justify-space-around pt-2 pb-2 grey darken-4"},[a("v-btn",{staticStyle:{"font-size":"20px"},attrs:{text:"",color:"error",large:""},on:{click:function(e){return t.visibleCat("all")}}},[t._v("全部")]),a("v-btn",{staticStyle:{"font-size":"20px"},attrs:{text:"",color:"error",large:""},on:{click:function(e){return t.visibleCat("north")}}},[t._v("漫遊北歐")]),a("v-btn",{staticStyle:{"font-size":"20px"},attrs:{text:"",color:"error",large:""},on:{click:function(e){return t.visibleCat("south")}}},[t._v("鄉村南歐")])],1)])},wt=[],$t={methods:{visibleCat:function(t){this.$emit("visibleCat",t)}}},Ot=$t,At=Object(E["a"])(Ot,Et,wt,!1,null,null,null),Lt=At.exports,Nt={data:function(){return{products:[],product:{},status:{loadingItem:""},cartList:[],visibility:"all",isLoading:!1}},components:{Category:Lt},methods:{getProducts:function(){var t=this;t.isLoading=!0;var e="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/products");this.$http.get(e).then(function(e){t.isLoading=!1,console.log(e.data),t.products=e.data.products,t.pagination=e.data.pagination})},getProduct:function(t){var e=this;e.status.loadingItem=t,e.isLoading=!0,rt()("#productModal").modal("show");var a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/product/").concat(t);this.$http.get(a).then(function(t){e.isLoading=!1,t.data.success&&(e.status.loadingItem="",e.product=t.data.product)})},visibleCat:function(t){var e=this;e.visibility=t},getCart:function(){var t=this;t.isLoading=!0;var e="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/cart");this.$http.get(e).then(function(e){console.log("購物車",e.data.data),t.isLoading=!1,e.data.success&&(t.cartList=e.data.data)})},addCart:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this;s.isLoading=!0;var i="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/cart"),o={product_id:t,qty:a};this.$http.post(i,{data:o}).then(function(t){console.log(t.data),s.isLoading=!1,t.data.success&&(e.$bus.$emit("alertMessage","已加入購物車","success"),rt()("#productModal").modal("hide"),s.getCart())})},scrollDown:function(){rt()("html,body").animate({scrollTop:rt()(".nav-location-list").offset().top},1e3)}},created:function(){this.getProducts(),this.getCart()},computed:{filterAry:function(){var t=this;if("all"==t.visibility)return t.products;if("north"==t.visibility){var e=[];return t.products.forEach(function(t){"北歐"==t.category&&e.push(t)}),e}if("south"==t.visibility){var a=[];return t.products.forEach(function(t){"南歐"==t.category&&(a.push(t),console.log(a))}),a}}}},jt=Nt,St=(a("f9cf"),Object(E["a"])(jt,Pt,kt,!1,null,"18f8e446",null)),Ut=St.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart-area"},[a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1),a("v-layout",{staticClass:"d-flex justify-center mt-10 mb-10",attrs:{wrap:""}},[a("v-flex",{attrs:{lg10:""}},[a("v-data-table",{staticClass:"elevation-1 table",staticStyle:{"background-color":"rgb(255, 255, 255)"},attrs:{headers:t.headers,items:t.items,"item-key":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.action",fn:function(e){var s=e.item;return[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return e.preventDefault(),t.removeCartItem(s)}}},[a("v-icon",{attrs:{small:"",color:"error"}},[t._v("fas fa-trash-alt")])],1)]}},{key:"item.is_coupon",fn:function(e){var s=e.item;return[s.coupon?a("p",[t._v("已套用")]):a("p",[t._v("未套用")])]}}])})],1),a("v-flex",{attrs:{lg10:""}},[a("v-card",{attrs:{"min-width":"100%"}},[a("v-layout",{staticClass:"d-flex justify-center wrap pa-5"},[a("v-flex",{attrs:{lg5:""}},[a("v-text-field",{staticClass:"mr-5",attrs:{outlined:"",label:"請輸入優惠碼",dense:"","hide-details":""},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),a("v-btn",{attrs:{color:"primary"},on:{click:t.useCoupons}},[t._v("套用優惠碼")])],1),a("v-flex",{attrs:{lg12:""}},[a("v-divider")],1),a("v-flex",{attrs:{lg12:"","justify-end":""}},[a("p",{staticStyle:{"font-size":"20px"}},[t._v("總計:$ "+t._s(t.total))])]),a("v-flex",{attrs:{lg12:"","justify-end":""}},[t.final_total!==t.total?a("p",{staticStyle:{"font-size":"25px",color:"red"}},[t._v("優惠價:$ "+t._s(t.final_total))]):t._e()]),a("v-flex",{attrs:{lg12:"","justify-end":""}},[a("v-btn",{attrs:{color:"primary"},on:{click:t.createOrder}},[t._v("建立訂單")])],1)],1)],1)],1)],1)],1)},Mt=[],It={data:function(){return{headers:[{text:"操作",value:"action",class:"teal--text darken-1",sortable:!1},{text:"國家",value:"product.title",class:"teal--text darken-1"},{text:"人數",value:"qty",class:"teal--text darken-1",sortable:!1},{text:"是否套用優惠券",value:"is_coupon",class:"teal--text darken-1",sortable:!1}],items:[],total:null,final_total:null,cartList:[],isLoading:!1,isempty:!1,code:""}},methods:{getCart:function(){var t=this;t.isLoading=!0;var e="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/cart");this.$http.get(e).then(function(e){console.log(e.data.data),t.isLoading=!1,e.data.success&&(t.items=e.data.data.carts,t.total=e.data.data.total,t.final_total=e.data.data.final_total)})},removeCartItem:function(t){var e=this,a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/cart/").concat(t.id);this.$http.delete(a).then(function(t){console.log(t.data),e.getCart()})},changePage:function(){this.$router.push("/shopping")},useCoupons:function(){var t=this,e=this;e.isLoading=!0;var a={code:e.code},s="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/coupon");this.$http.post(s,{data:a}).then(function(a){console.log(a.data),a.data.success?(e.isLoading=!1,t.$bus.$emit("alertMessage",a.data.message,"success"),e.getCart()):(e.isLoading=!1,t.$bus.$emit("alertMessage",a.data.message,"danger"))})},createOrder:function(){var t=this;t.$router.push("/order_form")}},created:function(){this.getCart()}},Dt=It,Rt=(a("fc93"),Object(E["a"])(Dt,Vt,Mt,!1,null,"74e894d8",null)),Bt=Rt.exports,qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("Alert"),s("div",[s("v-toolbar",{staticClass:"d-flex justify-start grey darken-1",staticStyle:{position:"fixed",left:"0",right:"0","z-index":"5"}},[s("div",{staticClass:"mr-5"},[s("a",{staticClass:"text-muted",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(e)}}},[s("img",{attrs:{src:a("4ffd"),alt:""}})])]),s("div",[s("v-btn",{attrs:{text:"",dark:""},on:{click:t.aboutUs}},[t._v("關於我們")]),s("v-btn",{attrs:{text:"",dark:""},on:{click:t.shopping}},[t._v("輕旅歐洲")]),s("v-btn",{attrs:{text:"",dark:""},on:{click:t.admin}},[t._v("ADMIN")])],1)]),s("div",{staticClass:"container-bg",staticStyle:{width:"100%"}},[t._m(0),s("router-view")],1)],1)],1)},Tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cover d-flex align-end"},[a("p",[t._v("TRAVEL NOW")])])}],Ft={data:function(){return{}},components:{Alert:X},methods:{changePage:function(){this.$router.push("/")},aboutUs:function(){var t=this;t.$router.push("/")},shopping:function(){var t=this;t.$router.push("/shopping")},admin:function(){var t=this;t.$router.push("/login")}}},zt=Ft,Wt=(a("ee2d"),Object(E["a"])(zt,qt,Tt,!1,null,"cf478adc",null)),Jt=Wt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"my-5 row justify-content-center w-100"},[a("form",{staticClass:"form-card",on:{submit:function(e){return e.preventDefault(),t.creatOrder(e)}}},[t._m(0),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名不得為空")]):t._e()]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}})]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group pd"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._m(1)])])])},Yt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group form-title"},[a("h2",[t._v("基本資料")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-right pd pd-b-2"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"submit"}},[t._v("送出訂單")])])}],Gt={data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{creatOrder:function(){var t=this,e=this,a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/order"),s=e.form;this.$validator.validate().then(function(i){i?t.$http.post(a,{data:s}).then(function(t){e.isLoading=!1,console.log(t.data),t.data.success&&e.$router.push("/customer_checkout/".concat(t.data.orderId))}):console.log("欄位不完整")})}}},Kt=Gt,Qt=(a("ab03"),Object(E["a"])(Kt,Ht,Yt,!1,null,"040d8051",null)),Xt=Qt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticClass:"cart-list-container mt-10",staticStyle:{background:"rgb(255, 255, 255)"}},[a("form",{staticClass:"form-card",on:{submit:function(e){return e.preventDefault(),t.payOrder(e)}}},[a("table",{staticClass:"table"},[t._m(0),a("tbody",[t._m(1),t._l(t.order.products,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.product.title))]),a("td",{staticClass:"align-middle text-center"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),a("td",{staticClass:"align-middle text-center"},[t._v(t._s(t._f("currency")(e.final_total)))])])})],2),a("tfoot",{staticClass:"mt-2"},[a("tr",[a("td"),a("td",{staticClass:"align-middle text-center fs-r"},[t._v("總計")]),a("td",{staticClass:"text-center fs-r"},[t._v(t._s(t._f("currency")(t.order.total)))])])])]),a("table",{staticClass:"table mt-5"},[t._m(2),a("tbody",[a("tr",[a("th",{staticClass:"align-middle teal--text"},[t._v("Email")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",{staticClass:"align-middle teal--text"},[t._v("姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",{staticClass:"align-middle teal--text"},[t._v("收件人電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",{staticClass:"align-middle teal--text"},[t._v("收件人地址")]),a("td",[t._v(t._s(t.order.user.address))])]),a("tr",[a("th",{staticClass:"align-middle teal--text"},[t._v("付款狀態")]),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?a("div",{staticClass:"text-right pay-btn"},[a("button",{staticClass:"btn btn-danger mr-5"},[t._v("確認付款")])]):t._e(),!0===t.order.is_paid?a("div",{staticClass:"text-right pay-btn"},[a("router-link",{staticClass:"btn btn-danger mr-5",attrs:{to:"/shopping"}},[t._v("回首頁")])],1):t._e()])])])])},te=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{staticClass:"text-center",attrs:{colspan:"3"}},[a("h2",[t._v("購買資訊")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"h-6"},[a("th",{staticClass:"align-middle teal--text darken-1",attrs:{width:"250"}},[t._v("旅遊地點")]),a("th",{staticClass:"align-middle teal--text darken-1 text-center",attrs:{width:"200"}},[t._v("人數")]),a("th",{staticClass:"align-middle teal--text darken-1 text-center",attrs:{width:"210"}},[t._v("單價")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center personal-info",attrs:{colspan:"2"}},[t._v("個人資料")])])])}],ee={data:function(){return{orderId:"",order:{user:{}}}},methods:{getOrder:function(){var t=this,e="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/order/").concat(t.orderId);this.$http.get(e).then(function(e){t.order=e.data.order,console.log(e)})},payOrder:function(){var t=this,e="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/pay/").concat(t.orderId);this.$http.post(e).then(function(e){t.order=e.data.order,console.log(e),t.getOrder()})}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()}},ae=ee,se=(a("255a"),Object(E["a"])(ae,Zt,te,!1,null,"6daa68ef",null)),ie=se.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"home-page-container"},[a("div",{staticClass:"welcome"},[a("div",{staticClass:"title-bg flex"},[a("div",[a("v-btn",{attrs:{dark:"",outlined:"",large:""},on:{click:t.shopping}},[t._v("WELCOME EUROPE")])],1)])]),a("div",{staticClass:"hot-product-container"},[a("ul",{staticClass:"hot-list flex pl-0"},[a("li",{staticClass:"list list-one"},[a("div",{staticClass:"hover-effect flex"},[a("v-btn",{attrs:{dark:"",outlined:"",large:""},on:{click:t.shopping}},[t._v("THE LONDON EYE")])],1)]),a("li",{staticClass:"list list-two pa-0"},[a("div",{staticClass:"hover-effect flex"},[a("v-btn",{attrs:{dark:"",outlined:"",large:""},on:{click:t.shopping}},[t._v("ITALY")])],1)])])]),a("div",{staticClass:"slo d-flex align-center justify-center"},[a("div",[a("v-btn",{attrs:{dark:"",outlined:"",large:""},on:{click:t.shopping}},[t._v("ENJOY THE TRIP")])],1)]),t._m(0)])])},re=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer flex"},[a("p",[t._v("此網站純為練習用 無商業用途")]),t._v("©2019 All Right Reserved | Design by James\n    ")])}],ne={data:function(){return{}},methods:{shopping:function(){var t=this;t.$router.push("/shopping")}}},le=ne,ce=(a("4e11"),Object(E["a"])(le,oe,re,!1,null,"3a38fd46",null)),de=ce.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coupon-area"},[a("v-container",{staticStyle:{padding:"unset"},attrs:{fluid:""}},[a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}})],1)]),a("v-layout",{staticClass:"mb-3",attrs:{"justify-end":""}},[a("v-flex",{staticClass:"d-flex justify-end",attrs:{lg2:"",sm2:"",xs12:"","ma-1":""}},[a("v-btn",{attrs:{color:"orange darken-1",dark:""},on:{click:function(e){return t.openModal(!0)}}},[t._v("建立新優惠券")])],1)],1),a("v-data-table",{staticClass:"elevation-1 table",staticStyle:{"background-color":"rgb(255, 255, 255)"},attrs:{headers:t.headers,items:t.items,"items-per-page":10,"item-key":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.is_enabled",fn:function(e){var s=e.item;return[s.is_enabled?a("p",[t._v("是")]):a("p",[t._v("否")])]}},{key:"item.action",fn:function(e){var s=e.item;return[a("v-btn",{staticClass:"mr-5",attrs:{small:"",dark:"",color:"light-blue darken-1"},on:{click:function(e){return t.openModal(!1,s)}}},[t._v("編輯")]),a("v-btn",{attrs:{small:"",dark:"",color:"pink darken-1"},on:{click:function(e){return t.removeCoupons(s)}}},[t._v("刪除")])]}}])}),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"w-100",staticStyle:{"text-align":"-webkit-left"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("優惠券名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.title,expression:"tempCoupons.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入名稱"},domProps:{value:t.tempCoupons.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("折扣數")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.percent,expression:"tempCoupons.percent"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入折扣"},domProps:{value:t.tempCoupons.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"percent",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("到期日")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.due_date,expression:"tempCoupons.due_date"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入期限"},domProps:{value:t.tempCoupons.due_date},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"due_date",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6 w-100"},[a("label",{attrs:{for:"origin_price"}},[t._v("折扣代碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.code,expression:"tempCoupons.code"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入折扣代碼"},domProps:{value:t.tempCoupons.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupons,"code",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupons.is_enabled,expression:"tempCoupons.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupons.is_enabled)?t._i(t.tempCoupons.is_enabled,null)>-1:t._q(t.tempCoupons.is_enabled,1)},on:{change:function(e){var a=t.tempCoupons.is_enabled,s=e.target,i=s.checked?1:0;if(Array.isArray(a)){var o=null,r=t._i(a,o);s.checked?r<0&&t.$set(t.tempCoupons,"is_enabled",a.concat([o])):r>-1&&t.$set(t.tempCoupons,"is_enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.tempCoupons,"is_enabled",i)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupons}},[t._v("確認")])])])])])],1)},pe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("新增優惠券")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],me={data:function(){return{headers:[{text:"折價券名稱",value:"title",class:"teal--text darken-1"},{text:"折扣數",value:"percent",class:"teal--text darken-1",sortable:!1},{text:"到期日",value:"due_date",class:"teal--text darken-1",sortable:!1},{text:"是否啟用",value:"is_enabled",class:"teal--text darken-1",sortable:!1},{text:"編輯",value:"action",class:"teal--text darken-1",sortable:!1}],items:[],coupons:[],tempCoupons:{title:"",is_enabled:0,percent:100,due_date:0,code:""},due_date:new Date,isNew:!1,pagination:{},uploadFileLoading:!1,isLoading:!1}},methods:{getCoupons:function(){var t=this;t.isLoading=!0;var e="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/admin/coupons");this.$http.get(e).then(function(e){console.log(e.data),e.data.success&&(t.isLoading=!1,t.items=e.data.coupons)})},updateCoupons:function(){var t=this;t.isLoading=!0;var e="post",a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/admin/coupon");if(!t.isNew){e="put";a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/admin/coupon/").concat(t.tempCoupons.id)}this.$http[e](a,{data:t.tempCoupons}).then(function(e){t.isLoading=!1,t.items=e.data.coupone,rt()("#productModal").modal("hide"),t.getCoupons()})},removeCoupons:function(t){var e=this,a="".concat(Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_API,"/admin/coupon/").concat(t.id);this.$http.delete(a).then(function(t){t.data.success&&e.getCoupons()})},openModal:function(t,e){var a=this;rt()("#productModal").modal("show"),t?(a.tempCoupons={},a.isNew=!0):(a.tempCoupons=Object.assign({},e),a.isNew=!1)}},created:function(){this.getCoupons()},watch:{due_date:function(){var t=this,e=Math.floor(new Date(t.due_date)/1e3);t.tempCoupon.due_date=e}}},ve=me,fe=Object(E["a"])(ve,ue,pe,!1,null,null,null),ge=fe.exports;s["default"].use(j["a"]);var _e=new j["a"]({routes:[{path:"*",redirect:"shopping"},{name:"Login",path:"/login",component:$},{name:"Dashboard",path:"/admin",component:at,children:[{name:"Products",path:"products",component:gt,meta:{requiresAuth:!0}},{name:"Orders",path:"orders",component:yt,meta:{requiresAuth:!0}},{name:"Coupons",path:"coupons",component:ge,meta:{requiresAuth:!0}}]},{name:"Home",path:"/",component:Jt,children:[{name:"HomePage",path:"",component:de},{name:"Shopping",path:"shopping",component:Ut},{name:"CartList",path:"cart",component:Bt},{name:"OrderForm",path:"order_form",component:Xt},{name:"CustomerCheckOut",path:"customer_checkout/:orderId",component:ie}]}]});s["default"].prototype.$bus=new s["default"];var he=a("427f"),be=a.n(he),Ce=a("ce5b"),xe=a.n(Ce);a("bf40"),a("5363");s["default"].use(xe.a);var ye={},Pe=new xe.a(ye);s["default"].filter("currency",h),s["default"].filter("date",_),s["default"].config.productionTip=!1,s["default"].use(n.a,o.a),l["c"].add(c["a"]),s["default"].component("font-awesome-icon",d["a"]),s["default"].config.productionTip=!1,o.a.defaults.withCredentials=!0,s["default"].component("Loading",p.a),s["default"].use(v["a"]),s["default"].use(g.a);var ke=new v["a"]({locale:"zhTW"});s["default"].use(m["a"],{i18n:ke,dictionary:{zhTW:be.a}}),new s["default"]({i18n:ke,render:function(t){return t(N)},router:_e,vuetify:Pe}).$mount("#app"),_e.beforeEach(function(t,e,a){if(console.log("to",t,"from",e,"next",a),t.meta.requiresAuth){var s="https://vue-course-api.hexschool.io/api/user/check";o.a.post(s).then(function(e){e.data.success?a():a({path:"/login",query:{redirect:t.fullPath}})})}else a()})},"5bb1":function(t,e,a){},"85ec":function(t,e,a){},ab03:function(t,e,a){"use strict";var s=a("c1ee"),i=a.n(s);i.a},b1d9:function(t,e,a){},c1ee:function(t,e,a){},e086:function(t,e,a){},e29b:function(t,e,a){"use strict";var s=a("2ece"),i=a.n(s);i.a},ee2d:function(t,e,a){"use strict";var s=a("286a"),i=a.n(s);i.a},f9cf:function(t,e,a){"use strict";var s=a("5bb1"),i=a.n(s);i.a},fc93:function(t,e,a){"use strict";var s=a("2200"),i=a.n(s);i.a}});
//# sourceMappingURL=app.da33044f.js.map